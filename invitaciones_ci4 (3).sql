-- phpMyAdmin SQL Dump
-- version 5.2.0
-- https://www.phpmyadmin.net/
--
-- Host: localhost:3306
-- Generation Time: Feb 05, 2026 at 09:01 PM
-- Server version: 8.0.30
-- PHP Version: 8.1.10

SET SQL_MODE = "NO_AUTO_VALUE_ON_ZERO";
START TRANSACTION;
SET time_zone = "+00:00";


/*!40101 SET @OLD_CHARACTER_SET_CLIENT=@@CHARACTER_SET_CLIENT */;
/*!40101 SET @OLD_CHARACTER_SET_RESULTS=@@CHARACTER_SET_RESULTS */;
/*!40101 SET @OLD_COLLATION_CONNECTION=@@COLLATION_CONNECTION */;
/*!40101 SET NAMES utf8mb4 */;

--
-- Database: `invitaciones_ci4`
--

-- --------------------------------------------------------

--
-- Table structure for table `audit_log`
--

CREATE TABLE `audit_log` (
  `id` bigint NOT NULL,
  `actor_user_id` char(36) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `event_id` char(36) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `action` varchar(120) COLLATE utf8mb4_unicode_ci NOT NULL,
  `entity` varchar(80) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `entity_id` varchar(64) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `ip_address` varchar(45) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `user_agent` varchar(255) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `metadata` json DEFAULT NULL,
  `created_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;

-- --------------------------------------------------------

--
-- Table structure for table `auth_tokens`
--

CREATE TABLE `auth_tokens` (
  `id` bigint NOT NULL,
  `user_id` char(36) COLLATE utf8mb4_unicode_ci NOT NULL,
  `token_hash` char(64) COLLATE utf8mb4_unicode_ci NOT NULL,
  `token_type` enum('api','remember','reset','verify') COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'api',
  `expires_at` datetime DEFAULT NULL,
  `created_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `revoked_at` datetime DEFAULT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;

-- --------------------------------------------------------

--
-- Table structure for table `ci_sessions`
--

CREATE TABLE `ci_sessions` (
  `id` varchar(128) COLLATE utf8mb4_unicode_ci NOT NULL,
  `ip_address` varchar(45) COLLATE utf8mb4_unicode_ci NOT NULL,
  `timestamp` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `data` blob NOT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;

--
-- Dumping data for table `ci_sessions`
--

INSERT INTO `ci_sessions` (`id`, `ip_address`, `timestamp`, `data`) VALUES
('ci_session:05ca1d4309f1b57d86f36ab789b0dae0', '::1', '2026-02-04 21:27:10', 0x5f5f63695f6c6173745f726567656e65726174657c693a313737303234303336313b5f63695f70726576696f75735f75726c7c733a34333a22687474703a2f2f6c6f63616c686f73742f3133626f6461732f7075626c69632f61646d696e2f7573657273223b757365725f69647c733a33363a2261316232633364342d653566362d373839302d616263642d656631323334353637383930223b757365725f656d61696c7c733a31373a2261646d696e403133626f6461732e636f6d223b757365725f6e616d657c733a31313a22436573617220476f6d657a223b757365725f726f6c65737c613a313a7b693a303b733a31303a22737570657261646d696e223b7d636c69656e745f69647c4e3b69734c6f67676564496e7c623a313b),
('ci_session:0f5a94b978c3365b836f8840d57b4774', '::1', '2026-01-27 03:01:04', 0x5f5f63695f6c6173745f726567656e65726174657c693a313736393438323836343b5f63695f70726576696f75735f75726c7c733a38363a22687474703a2f2f6c6f63616c686f73742f3133626f6461732f7075626c69632f61646d696e2f6576656e74732f656469742f63323632616564612d356631352d343161392d396333302d613235623935643739666532223b757365725f69647c733a33363a2261316232633364342d653566362d373839302d616263642d656631323334353637383930223b757365725f656d61696c7c733a31373a2261646d696e403133626f6461732e636f6d223b757365725f6e616d657c733a31333a2241646d696e6973747261646f72223b757365725f726f6c65737c613a313a7b693a303b733a31303a22737570657261646d696e223b7d636c69656e745f69647c4e3b69734c6f67676564496e7c623a313b5f5f63695f766172737c613a303a7b7d),
('ci_session:142e9bccd385f6d529ea78090f76f967', '::1', '2026-01-26 05:02:13', 0x5f5f63695f6c6173745f726567656e65726174657c693a313736393430333733333b5f63695f70726576696f75735f75726c7c733a38393a22687474703a2f2f6c6f63616c686f73742f3133626f6461732f7075626c69632f61646d696e2f6576656e74732f65313233343536372d383961622d636465662d303132332d3435363738396162636465662f67616c6c657279223b757365725f69647c733a33363a2261316232633364342d653566362d373839302d616263642d656631323334353637383930223b757365725f656d61696c7c733a31373a2261646d696e403133626f6461732e636f6d223b757365725f6e616d657c733a31333a2241646d696e6973747261646f72223b757365725f726f6c65737c613a313a7b693a303b733a31303a22737570657261646d696e223b7d636c69656e745f69647c4e3b69734c6f67676564496e7c623a313b5f5f63695f766172737c613a303a7b7d),
('ci_session:1d1f9d0d9f301d97d00e45d6d02f39da', '::1', '2026-02-05 20:59:40', 0x5f5f63695f6c6173745f726567656e65726174657c693a313737303332353037353b757365725f69647c733a33363a2261316232633364342d653566362d373839302d616263642d656631323334353637383930223b757365725f656d61696c7c733a31373a2261646d696e403133626f6461732e636f6d223b757365725f6e616d657c733a31313a22436573617220476f6d657a223b757365725f726f6c65737c613a313a7b693a303b733a31303a22737570657261646d696e223b7d636c69656e745f69647c4e3b69734c6f67676564496e7c623a313b5f63695f70726576696f75735f75726c7c733a34343a22687474703a2f2f6c6f63616c686f73742f3133626f6461732f7075626c69632f61646d696e2f6576656e7473223b),
('ci_session:2223d17efc8f1672e673229b78378b36', '::1', '2026-02-05 20:46:55', 0x5f5f63695f6c6173745f726567656e65726174657c693a313737303332343431353b757365725f69647c733a33363a2261316232633364342d653566362d373839302d616263642d656631323334353637383930223b757365725f656d61696c7c733a31373a2261646d696e403133626f6461732e636f6d223b757365725f6e616d657c733a31313a22436573617220476f6d657a223b757365725f726f6c65737c613a313a7b693a303b733a31303a22737570657261646d696e223b7d636c69656e745f69647c4e3b69734c6f67676564496e7c623a313b5f63695f70726576696f75735f75726c7c733a34373a22687474703a2f2f6c6f63616c686f73742f3133626f6461732f7075626c69632f61646d696e2f74656d706c61746573223b),
('ci_session:30748668bc631ec1f5b20c8e0ee64010', '::1', '2026-02-05 20:57:55', 0x5f5f63695f6c6173745f726567656e65726174657c693a313737303332353037353b757365725f69647c733a33363a2261316232633364342d653566362d373839302d616263642d656631323334353637383930223b757365725f656d61696c7c733a31373a2261646d696e403133626f6461732e636f6d223b757365725f6e616d657c733a31313a22436573617220476f6d657a223b757365725f726f6c65737c613a313a7b693a303b733a31303a22737570657261646d696e223b7d636c69656e745f69647c4e3b69734c6f67676564496e7c623a313b5f63695f70726576696f75735f75726c7c733a35343a22687474703a2f2f6c6f63616c686f73742f3133626f6461732f7075626c69632f61646d696e2f74656d706c617465732f656469742f33223b5f5f63695f766172737c613a303a7b7d),
('ci_session:3364775aa110861a30ba6a989c9db80e', '::1', '2026-01-26 04:23:21', 0x5f5f63695f6c6173745f726567656e65726174657c693a313736393430313430313b5f63695f70726576696f75735f75726c7c733a38363a22687474703a2f2f6c6f63616c686f73742f3133626f6461732f7075626c69632f61646d696e2f6576656e74732f656469742f65313233343536372d383961622d636465662d303132332d343536373839616263646566223b757365725f69647c733a33363a2261316232633364342d653566362d373839302d616263642d656631323334353637383930223b757365725f656d61696c7c733a31373a2261646d696e403133626f6461732e636f6d223b757365725f6e616d657c733a31333a2241646d696e6973747261646f72223b757365725f726f6c65737c613a313a7b693a303b733a31303a22737570657261646d696e223b7d636c69656e745f69647c4e3b69734c6f67676564496e7c623a313b),
('ci_session:35612703c8d49fc37fbbde48a1999f66', '::1', '2026-02-04 18:45:39', 0x5f5f63695f6c6173745f726567656e65726174657c693a313737303233303733393b5f63695f70726576696f75735f75726c7c733a34373a22687474703a2f2f6c6f63616c686f73742f3133626f6461732f7075626c69632f61646d696e2f74656d706c61746573223b757365725f69647c733a33363a2261316232633364342d653566362d373839302d616263642d656631323334353637383930223b757365725f656d61696c7c733a31373a2261646d696e403133626f6461732e636f6d223b757365725f6e616d657c733a31313a22436573617220476f6d657a223b757365725f726f6c65737c613a313a7b693a303b733a31303a22737570657261646d696e223b7d636c69656e745f69647c4e3b69734c6f67676564496e7c623a313b),
('ci_session:541691f81c4b635efdae8dde70c7369a', '::1', '2026-01-26 06:16:12', 0x5f5f63695f6c6173745f726567656e65726174657c693a313736393430383137323b5f63695f70726576696f75735f75726c7c733a38363a22687474703a2f2f6c6f63616c686f73742f3133626f6461732f7075626c69632f61646d696e2f6576656e74732f656469742f65313233343536372d383961622d636465662d303132332d343536373839616263646566223b757365725f69647c733a33363a2261316232633364342d653566362d373839302d616263642d656631323334353637383930223b757365725f656d61696c7c733a31373a2261646d696e403133626f6461732e636f6d223b757365725f6e616d657c733a31333a2241646d696e6973747261646f72223b757365725f726f6c65737c613a313a7b693a303b733a31303a22737570657261646d696e223b7d636c69656e745f69647c4e3b69734c6f67676564496e7c623a313b),
('ci_session:57c85fca9cb8b6b20ccc4ca80c841acc', '::1', '2026-02-04 18:51:06', 0x5f5f63695f6c6173745f726567656e65726174657c693a313737303233313036363b5f63695f70726576696f75735f75726c7c733a38363a22687474703a2f2f6c6f63616c686f73742f3133626f6461732f7075626c69632f61646d696e2f6576656e74732f766965772f65313233343536372d383961622d636465662d303132332d343536373839616263646566223b757365725f69647c733a33363a2261316232633364342d653566362d373839302d616263642d656631323334353637383930223b757365725f656d61696c7c733a31373a2261646d696e403133626f6461732e636f6d223b757365725f6e616d657c733a31313a22436573617220476f6d657a223b757365725f726f6c65737c613a313a7b693a303b733a31303a22737570657261646d696e223b7d636c69656e745f69647c4e3b69734c6f67676564496e7c623a313b5f5f63695f766172737c613a303a7b7d),
('ci_session:635612a90116452436c127f0710af4d1', '::1', '2026-01-26 05:31:36', 0x5f5f63695f6c6173745f726567656e65726174657c693a313736393430353439363b5f63695f70726576696f75735f75726c7c733a38363a22687474703a2f2f6c6f63616c686f73742f3133626f6461732f7075626c69632f61646d696e2f6576656e74732f656469742f65313233343536372d383961622d636465662d303132332d343536373839616263646566223b757365725f69647c733a33363a2261316232633364342d653566362d373839302d616263642d656631323334353637383930223b757365725f656d61696c7c733a31373a2261646d696e403133626f6461732e636f6d223b757365725f6e616d657c733a31333a2241646d696e6973747261646f72223b757365725f726f6c65737c613a313a7b693a303b733a31303a22737570657261646d696e223b7d636c69656e745f69647c4e3b69734c6f67676564496e7c623a313b5f5f63695f766172737c613a303a7b7d),
('ci_session:65680047a431836018ba9a894e5d8214', '::1', '2026-02-05 19:10:56', 0x5f5f63695f6c6173745f726567656e65726174657c693a313737303331383635363b757365725f69647c733a33363a2261316232633364342d653566362d373839302d616263642d656631323334353637383930223b757365725f656d61696c7c733a31373a2261646d696e403133626f6461732e636f6d223b757365725f6e616d657c733a31313a22436573617220476f6d657a223b757365725f726f6c65737c613a313a7b693a303b733a31303a22737570657261646d696e223b7d636c69656e745f69647c4e3b69734c6f67676564496e7c623a313b5f63695f70726576696f75735f75726c7c733a34373a22687474703a2f2f6c6f63616c686f73742f3133626f6461732f7075626c69632f61646d696e2f64617368626f617264223b),
('ci_session:6b8e60a3d1d3e41a06ed5287ba11427a', '::1', '2026-02-04 18:11:48', 0x5f5f63695f6c6173745f726567656e65726174657c693a313737303232383730383b5f63695f70726576696f75735f75726c7c733a34343a22687474703a2f2f6c6f63616c686f73742f3133626f6461732f7075626c69632f61646d696e2f6576656e7473223b757365725f69647c733a33363a2261316232633364342d653566362d373839302d616263642d656631323334353637383930223b757365725f656d61696c7c733a31373a2261646d696e403133626f6461732e636f6d223b757365725f6e616d657c733a31333a2241646d696e6973747261646f72223b757365725f726f6c65737c613a313a7b693a303b733a31303a22737570657261646d696e223b7d636c69656e745f69647c4e3b69734c6f67676564496e7c623a313b),
('ci_session:750fe7d7b7016bbac5086eecbfd054b1', '::1', '2026-01-27 03:17:55', 0x5f5f63695f6c6173745f726567656e65726174657c693a313736393438333837353b5f63695f70726576696f75735f75726c7c733a38363a22687474703a2f2f6c6f63616c686f73742f3133626f6461732f7075626c69632f61646d696e2f6576656e74732f656469742f63323632616564612d356631352d343161392d396333302d613235623935643739666532223b757365725f69647c733a33363a2261316232633364342d653566362d373839302d616263642d656631323334353637383930223b757365725f656d61696c7c733a31373a2261646d696e403133626f6461732e636f6d223b757365725f6e616d657c733a31333a2241646d696e6973747261646f72223b757365725f726f6c65737c613a313a7b693a303b733a31303a22737570657261646d696e223b7d636c69656e745f69647c4e3b69734c6f67676564496e7c623a313b5f5f63695f766172737c613a303a7b7d),
('ci_session:7d46062f6443e09170909acf10b13f6c', '::1', '2026-02-04 18:52:23', 0x5f5f63695f6c6173745f726567656e65726174657c693a313737303233313036363b5f63695f70726576696f75735f75726c7c733a38363a22687474703a2f2f6c6f63616c686f73742f3133626f6461732f7075626c69632f61646d696e2f6576656e74732f656469742f65313233343536372d383961622d636465662d303132332d343536373839616263646566223b757365725f69647c733a33363a2261316232633364342d653566362d373839302d616263642d656631323334353637383930223b757365725f656d61696c7c733a31373a2261646d696e403133626f6461732e636f6d223b757365725f6e616d657c733a31313a22436573617220476f6d657a223b757365725f726f6c65737c613a313a7b693a303b733a31303a22737570657261646d696e223b7d636c69656e745f69647c4e3b69734c6f67676564496e7c623a313b5f5f63695f766172737c613a303a7b7d),
('ci_session:9049a6bbd71fc5c043c950014f84021b', '::1', '2026-01-26 04:42:45', 0x5f5f63695f6c6173745f726567656e65726174657c693a313736393430323536353b5f63695f70726576696f75735f75726c7c733a38363a22687474703a2f2f6c6f63616c686f73742f3133626f6461732f7075626c69632f61646d696e2f6576656e74732f656469742f65313233343536372d383961622d636465662d303132332d343536373839616263646566223b757365725f69647c733a33363a2261316232633364342d653566362d373839302d616263642d656631323334353637383930223b757365725f656d61696c7c733a31373a2261646d696e403133626f6461732e636f6d223b757365725f6e616d657c733a31333a2241646d696e6973747261646f72223b757365725f726f6c65737c613a313a7b693a303b733a31303a22737570657261646d696e223b7d636c69656e745f69647c4e3b69734c6f67676564496e7c623a313b5f5f63695f766172737c613a303a7b7d),
('ci_session:934bea32bf6fe517f8fe676674e99bb3', '127.0.0.1', '2026-01-27 02:45:53', 0x5f5f63695f6c6173745f726567656e65726174657c693a313736393438313935323b72656469726563745f75726c7c733a33373a22687474703a2f2f6c6f63616c686f73742f3133626f6461732f7075626c69632f61646d696e223b6572726f727c733a35313a22446562657320696e69636961722073657369c3b36e2070617261206163636564657220612065737461207365636369c3b36e2e223b5f5f63695f766172737c613a313a7b733a353a226572726f72223b733a333a226e6577223b7d),
('ci_session:9525732f87b41464a0afa854f70d7ca7', '::1', '2026-01-27 03:12:26', 0x5f5f63695f6c6173745f726567656e65726174657c693a313736393438333534363b5f63695f70726576696f75735f75726c7c733a38363a22687474703a2f2f6c6f63616c686f73742f3133626f6461732f7075626c69632f61646d696e2f6576656e74732f656469742f63323632616564612d356631352d343161392d396333302d613235623935643739666532223b757365725f69647c733a33363a2261316232633364342d653566362d373839302d616263642d656631323334353637383930223b757365725f656d61696c7c733a31373a2261646d696e403133626f6461732e636f6d223b757365725f6e616d657c733a31333a2241646d696e6973747261646f72223b757365725f726f6c65737c613a313a7b693a303b733a31303a22737570657261646d696e223b7d636c69656e745f69647c4e3b69734c6f67676564496e7c623a313b5f5f63695f766172737c613a303a7b7d),
('ci_session:96e6cba3598f184983b75d5e3392ce0f', '::1', '2026-01-27 02:54:55', 0x5f5f63695f6c6173745f726567656e65726174657c693a313736393438323439353b5f63695f70726576696f75735f75726c7c733a38363a22687474703a2f2f6c6f63616c686f73742f3133626f6461732f7075626c69632f61646d696e2f6576656e74732f656469742f63323632616564612d356631352d343161392d396333302d613235623935643739666532223b757365725f69647c733a33363a2261316232633364342d653566362d373839302d616263642d656631323334353637383930223b757365725f656d61696c7c733a31373a2261646d696e403133626f6461732e636f6d223b757365725f6e616d657c733a31333a2241646d696e6973747261646f72223b757365725f726f6c65737c613a313a7b693a303b733a31303a22737570657261646d696e223b7d636c69656e745f69647c4e3b69734c6f67676564496e7c623a313b5f5f63695f766172737c613a303a7b7d),
('ci_session:9dd226602b9823306082c0fd166169df', '::1', '2026-01-27 03:21:50', 0x5f5f63695f6c6173745f726567656e65726174657c693a313736393438333837353b5f63695f70726576696f75735f75726c7c733a38363a22687474703a2f2f6c6f63616c686f73742f3133626f6461732f7075626c69632f61646d696e2f6576656e74732f656469742f63323632616564612d356631352d343161392d396333302d613235623935643739666532223b757365725f69647c733a33363a2261316232633364342d653566362d373839302d616263642d656631323334353637383930223b757365725f656d61696c7c733a31373a2261646d696e403133626f6461732e636f6d223b757365725f6e616d657c733a31333a2241646d696e6973747261646f72223b757365725f726f6c65737c613a313a7b693a303b733a31303a22737570657261646d696e223b7d636c69656e745f69647c4e3b69734c6f67676564496e7c623a313b5f5f63695f766172737c613a303a7b7d),
('ci_session:a8fa8aad8ffc962074a4c402ad15cbd9', '::1', '2026-01-26 06:16:12', 0x5f5f63695f6c6173745f726567656e65726174657c693a313736393430383137323b5f63695f70726576696f75735f75726c7c733a39303a22687474703a2f2f6c6f63616c686f73742f3133626f6461732f7075626c69632f61646d696e2f6576656e74732f65313233343536372d383961622d636465662d303132332d3435363738396162636465662f7265676973747279223b757365725f69647c733a33363a2261316232633364342d653566362d373839302d616263642d656631323334353637383930223b757365725f656d61696c7c733a31373a2261646d696e403133626f6461732e636f6d223b757365725f6e616d657c733a31333a2241646d696e6973747261646f72223b757365725f726f6c65737c613a313a7b693a303b733a31303a22737570657261646d696e223b7d636c69656e745f69647c4e3b69734c6f67676564496e7c623a313b5f5f63695f766172737c613a303a7b7d),
('ci_session:ade0dc65531b8da360741c1e89014f69', '::1', '2026-02-04 18:37:31', 0x5f5f63695f6c6173745f726567656e65726174657c693a313737303233303235313b5f63695f70726576696f75735f75726c7c733a34333a22687474703a2f2f6c6f63616c686f73742f3133626f6461732f7075626c69632f61646d696e2f7573657273223b757365725f69647c733a33363a2261316232633364342d653566362d373839302d616263642d656631323334353637383930223b757365725f656d61696c7c733a31373a2261646d696e403133626f6461732e636f6d223b757365725f6e616d657c733a31313a22436573617220476f6d657a223b757365725f726f6c65737c613a313a7b693a303b733a31303a22737570657261646d696e223b7d636c69656e745f69647c4e3b69734c6f67676564496e7c623a313b),
('ci_session:ae1ab428d415e7813bc5f81facf9ec60', '127.0.0.1', '2026-02-05 18:47:45', 0x5f5f63695f6c6173745f726567656e65726174657c693a313737303331373236353b5f5f63695f766172737c613a303a7b7d5f63695f70726576696f75735f75726c7c733a34333a22687474703a2f2f6c6f63616c686f73742f3133626f6461732f7075626c69632f61646d696e2f6c6f67696e223b),
('ci_session:b7d70179210d7371b6de282c61e710bc', '::1', '2026-02-04 17:03:35', 0x5f5f63695f6c6173745f726567656e65726174657c693a313737303232343631353b5f63695f70726576696f75735f75726c7c733a34333a22687474703a2f2f6c6f63616c686f73742f3133626f6461732f7075626c69632f61646d696e2f6c6f67696e223b5f63695f6f6c645f696e7075747c613a323a7b733a333a22676574223b613a303a7b7d733a343a22706f7374223b613a333a7b733a31343a22637372665f746573745f6e616d65223b733a33323a223238383430353261303036306366633663666434343134346336623065373734223b733a353a22656d61696c223b733a31373a2261646d696e403133626f6461732e636f6d223b733a383a2270617373776f7264223b733a383a2241646d696e313221223b7d7d5f5f63695f766172737c613a323a7b733a31333a225f63695f6f6c645f696e707574223b733a333a226f6c64223b733a353a226572726f72223b733a333a226f6c64223b7d6572726f727c733a32353a2243726564656e6369616c657320696e636f727265637461732e223b),
('ci_session:bcf733c2ba152c86fa702de2b098537e', '::1', '2026-02-05 20:52:28', 0x5f5f63695f6c6173745f726567656e65726174657c693a313737303332343734383b757365725f69647c733a33363a2261316232633364342d653566362d373839302d616263642d656631323334353637383930223b757365725f656d61696c7c733a31373a2261646d696e403133626f6461732e636f6d223b757365725f6e616d657c733a31313a22436573617220476f6d657a223b757365725f726f6c65737c613a313a7b693a303b733a31303a22737570657261646d696e223b7d636c69656e745f69647c4e3b69734c6f67676564496e7c623a313b5f63695f70726576696f75735f75726c7c733a34373a22687474703a2f2f6c6f63616c686f73742f3133626f6461732f7075626c69632f61646d696e2f74656d706c61746573223b),
('ci_session:c30bc56f6b228567009dce2ae908c3c1', '::1', '2026-01-26 04:14:12', 0x5f5f63695f6c6173745f726567656e65726174657c693a313736393430303835323b5f63695f70726576696f75735f75726c7c733a38363a22687474703a2f2f6c6f63616c686f73742f3133626f6461732f7075626c69632f61646d696e2f6576656e74732f656469742f63323632616564612d356631352d343161392d396333302d613235623935643739666532223b757365725f69647c733a33363a2261316232633364342d653566362d373839302d616263642d656631323334353637383930223b757365725f656d61696c7c733a31373a2261646d696e403133626f6461732e636f6d223b757365725f6e616d657c733a31333a2241646d696e6973747261646f72223b757365725f726f6c65737c613a313a7b693a303b733a31303a22737570657261646d696e223b7d636c69656e745f69647c4e3b69734c6f67676564496e7c623a313b),
('ci_session:c37f1bb5d00f78e65d0f0d65b974c11b', '::1', '2026-02-05 19:19:22', 0x5f5f63695f6c6173745f726567656e65726174657c693a313737303331393136323b757365725f69647c733a33363a2261316232633364342d653566362d373839302d616263642d656631323334353637383930223b757365725f656d61696c7c733a31373a2261646d696e403133626f6461732e636f6d223b757365725f6e616d657c733a31313a22436573617220476f6d657a223b757365725f726f6c65737c613a313a7b693a303b733a31303a22737570657261646d696e223b7d636c69656e745f69647c4e3b69734c6f67676564496e7c623a313b5f63695f70726576696f75735f75726c7c733a34373a22687474703a2f2f6c6f63616c686f73742f3133626f6461732f7075626c69632f61646d696e2f64617368626f617264223b),
('ci_session:c58441b1814c8304362412f2f07926d3', '::1', '2026-02-04 18:00:10', 0x5f5f63695f6c6173745f726567656e65726174657c693a313737303232383031303b5f63695f70726576696f75735f75726c7c733a34343a22687474703a2f2f6c6f63616c686f73742f3133626f6461732f7075626c69632f61646d696e2f6576656e7473223b757365725f69647c733a33363a2261316232633364342d653566362d373839302d616263642d656631323334353637383930223b757365725f656d61696c7c733a31373a2261646d696e403133626f6461732e636f6d223b757365725f6e616d657c733a31333a2241646d696e6973747261646f72223b757365725f726f6c65737c613a313a7b693a303b733a31303a22737570657261646d696e223b7d636c69656e745f69647c4e3b69734c6f67676564496e7c623a313b),
('ci_session:c5b7e599515599950218df931d112c2e', '::1', '2026-01-26 04:28:24', 0x5f5f63695f6c6173745f726567656e65726174657c693a313736393430313730343b5f63695f70726576696f75735f75726c7c733a38363a22687474703a2f2f6c6f63616c686f73742f3133626f6461732f7075626c69632f61646d696e2f6576656e74732f656469742f63323632616564612d356631352d343161392d396333302d613235623935643739666532223b757365725f69647c733a33363a2261316232633364342d653566362d373839302d616263642d656631323334353637383930223b757365725f656d61696c7c733a31373a2261646d696e403133626f6461732e636f6d223b757365725f6e616d657c733a31333a2241646d696e6973747261646f72223b757365725f726f6c65737c613a313a7b693a303b733a31303a22737570657261646d696e223b7d636c69656e745f69647c4e3b69734c6f67676564496e7c623a313b5f5f63695f766172737c613a303a7b7d),
('ci_session:cc6babfd56e628a8337a5e2fd9827932', '::1', '2026-02-04 18:06:33', 0x5f5f63695f6c6173745f726567656e65726174657c693a313737303232383339333b5f63695f70726576696f75735f75726c7c733a34343a22687474703a2f2f6c6f63616c686f73742f3133626f6461732f7075626c69632f61646d696e2f6576656e7473223b757365725f69647c733a33363a2261316232633364342d653566362d373839302d616263642d656631323334353637383930223b757365725f656d61696c7c733a31373a2261646d696e403133626f6461732e636f6d223b757365725f6e616d657c733a31333a2241646d696e6973747261646f72223b757365725f726f6c65737c613a313a7b693a303b733a31303a22737570657261646d696e223b7d636c69656e745f69647c4e3b69734c6f67676564496e7c623a313b),
('ci_session:df32e99864cab4b56b7cf39b3272d929', '::1', '2026-02-04 17:15:41', 0x5f5f63695f6c6173745f726567656e65726174657c693a313737303232353334313b5f63695f70726576696f75735f75726c7c733a34343a22687474703a2f2f6c6f63616c686f73742f3133626f6461732f7075626c69632f61646d696e2f6576656e7473223b757365725f69647c733a33363a2261316232633364342d653566362d373839302d616263642d656631323334353637383930223b757365725f656d61696c7c733a31373a2261646d696e403133626f6461732e636f6d223b757365725f6e616d657c733a31333a2241646d696e6973747261646f72223b757365725f726f6c65737c613a313a7b693a303b733a31303a22737570657261646d696e223b7d636c69656e745f69647c4e3b69734c6f67676564496e7c623a313b),
('ci_session:e87381f06fba1fd6c0d75601b003df4d', '::1', '2026-01-26 05:15:52', 0x5f5f63695f6c6173745f726567656e65726174657c693a313736393430343535323b72656469726563745f75726c7c733a38363a22687474703a2f2f6c6f63616c686f73742f3133626f6461732f7075626c69632f61646d696e2f6576656e74732f63323632616564612d356631352d343161392d396333302d6132356239356437396665322f72737670223b6572726f727c733a35313a22446562657320696e69636961722073657369c3b36e2070617261206163636564657220612065737461207365636369c3b36e2e223b5f5f63695f766172737c613a313a7b733a353a226572726f72223b733a333a226f6c64223b7d5f63695f70726576696f75735f75726c7c733a34333a22687474703a2f2f6c6f63616c686f73742f3133626f6461732f7075626c69632f61646d696e2f6c6f67696e223b),
('ci_session:e89a82ebfa2d9315cd44115e75937065', '::1', '2026-02-04 18:16:52', 0x5f5f63695f6c6173745f726567656e65726174657c693a313737303232393031323b5f63695f70726576696f75735f75726c7c733a34333a22687474703a2f2f6c6f63616c686f73742f3133626f6461732f7075626c69632f61646d696e2f7573657273223b757365725f69647c733a33363a2261316232633364342d653566362d373839302d616263642d656631323334353637383930223b757365725f656d61696c7c733a31373a2261646d696e403133626f6461732e636f6d223b757365725f6e616d657c733a31333a2241646d696e6973747261646f72223b757365725f726f6c65737c613a313a7b693a303b733a31303a22737570657261646d696e223b7d636c69656e745f69647c4e3b69734c6f67676564496e7c623a313b),
('ci_session:ff1dcbe0c9e3c11c3cb26b5ee67ca15e', '::1', '2026-02-04 18:25:10', 0x5f5f63695f6c6173745f726567656e65726174657c693a313737303232393531303b5f63695f70726576696f75735f75726c7c733a34333a22687474703a2f2f6c6f63616c686f73742f3133626f6461732f7075626c69632f61646d696e2f7573657273223b757365725f69647c733a33363a2261316232633364342d653566362d373839302d616263642d656631323334353637383930223b757365725f656d61696c7c733a31373a2261646d696e403133626f6461732e636f6d223b757365725f6e616d657c733a31333a2241646d696e6973747261646f72223b757365725f726f6c65737c613a313a7b693a303b733a31303a22737570657261646d696e223b7d636c69656e745f69647c4e3b69734c6f67676564496e7c623a313b);

-- --------------------------------------------------------

--
-- Table structure for table `clients`
--

CREATE TABLE `clients` (
  `id` char(36) COLLATE utf8mb4_unicode_ci NOT NULL,
  `user_id` char(36) COLLATE utf8mb4_unicode_ci NOT NULL,
  `company_name` varchar(120) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `notes` text COLLATE utf8mb4_unicode_ci,
  `created_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `updated_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;

--
-- Dumping data for table `clients`
--

INSERT INTO `clients` (`id`, `user_id`, `company_name`, `notes`, `created_at`, `updated_at`) VALUES
('d1234567-89ab-cdef-0123-456789abcdef', 'c1234567-89ab-cdef-0123-456789abcdef', 'Boda Ana & Carlos', 'Cliente de prueba para desarrollo', '2026-01-25 07:40:08', '2026-01-25 07:40:08'),
('fc2ff073-9b80-4494-832b-19ed5499d14e', '7b121cfe-2fce-4c91-904e-6f1c1e8c634d', '', '', '2026-01-25 18:34:07', '2026-01-25 18:34:07');

--
-- Triggers `clients`
--
DELIMITER $$
CREATE TRIGGER `bi_clients_uuid` BEFORE INSERT ON `clients` FOR EACH ROW BEGIN
  IF NEW.id IS NULL OR NEW.id = '' THEN SET NEW.id = UUID(); END IF;
END
$$
DELIMITER ;

-- --------------------------------------------------------

--
-- Table structure for table `content_modules`
--

CREATE TABLE `content_modules` (
  `id` char(36) COLLATE utf8mb4_unicode_ci NOT NULL,
  `event_id` char(36) COLLATE utf8mb4_unicode_ci NOT NULL,
  `module_type` varchar(50) COLLATE utf8mb4_unicode_ci NOT NULL,
  `css_id` varchar(80) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `sort_order` int NOT NULL DEFAULT '0',
  `is_enabled` tinyint(1) NOT NULL DEFAULT '1',
  `content_payload` json NOT NULL,
  `created_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `updated_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;

--
-- Dumping data for table `content_modules`
--

INSERT INTO `content_modules` (`id`, `event_id`, `module_type`, `css_id`, `sort_order`, `is_enabled`, `content_payload`, `created_at`, `updated_at`) VALUES
('277f66b4-fa19-11f0-800c-040e3ca73ff2', '4ad1e770-fa17-11f0-800c-040e3ca73ff2', 'couple_info', 'hero', 1, 1, '{\"headline\": \"¡Nos casamos!\", \"cta_label\": \"Confirmar asistencia\", \"cta_target\": \"#rsvp\", \"subheadline\": \"Acompáñanos a celebrar este día.\", \"hero_image_url\": \"/templates/sukun/img/hero.jpg\"}', '2026-01-25 12:10:39', '2026-01-25 12:10:39'),
('27834f00-fa19-11f0-800c-040e3ca73ff2', '4ad1e770-fa17-11f0-800c-040e3ca73ff2', 'timeline', 'historia', 2, 1, '{\"items\": [{\"text\": \"Un encuentro casual que cambió todo.\", \"year\": \"2018\", \"title\": \"Nos conocimos\"}, {\"text\": \"Una propuesta íntima, como siempre la soñamos.\", \"year\": \"2022\", \"title\": \"El “sí”\"}, {\"text\": \"El inicio de una nueva etapa.\", \"year\": \"2026\", \"title\": \"La boda\"}], \"title\": \"Nuestra historia\"}', '2026-01-25 12:10:39', '2026-01-25 12:10:39'),
('27877ae3-fa19-11f0-800c-040e3ca73ff2', '4ad1e770-fa17-11f0-800c-040e3ca73ff2', 'countdown', 'cuenta', 3, 1, '{\"title\": \"Cuenta regresiva\", \"subtitle\": \"Falta muy poco para el gran día\"}', '2026-01-25 12:10:39', '2026-01-25 12:10:39'),
('278ae893-fa19-11f0-800c-040e3ca73ff2', '4ad1e770-fa17-11f0-800c-040e3ca73ff2', 'venue', 'lugar', 4, 1, '{\"title\": \"Lugar\", \"show_map\": 1}', '2026-01-25 12:10:39', '2026-01-25 12:10:39'),
('278e402c-fa19-11f0-800c-040e3ca73ff2', '4ad1e770-fa17-11f0-800c-040e3ca73ff2', 'rsvp', 'rsvp', 5, 1, '{\"title\": \"Confirmar asistencia\", \"subtitle\": \"Nos encantará contar contigo\"}', '2026-01-25 12:10:39', '2026-01-25 12:10:39'),
('2e53d687-fa0b-11f0-800c-040e3ca73ff2', 'f2b3c4d5-e6f7-4890-a1b2-c3d4e5f67890', 'couple_info', 'hero', 1, 1, '{\"headline\": \"Nuestra boda\", \"cta_label\": \"Ver detalles\", \"cta_target\": \"#historia\", \"subheadline\": \"Nos encantaría que nos acompañes\", \"hero_image_url\": \"/uploads/demo/solene/hero.jpg\"}', '2026-01-25 10:30:37', '2026-01-25 10:30:37'),
('2e569e30-fa0b-11f0-800c-040e3ca73ff2', 'f2b3c4d5-e6f7-4890-a1b2-c3d4e5f67890', 'timeline', 'historia', 2, 1, '{\"items\": [{\"date\": \"2018\", \"text\": \"Nos conocimos en una tarde que parecía cualquier otra.\", \"title\": \"El inicio\"}, {\"date\": \"2023\", \"text\": \"Entendimos que el hogar es un lugar que se construye en equipo.\", \"title\": \"La decisión\"}, {\"date\": \"2026\", \"text\": \"Y aquí estamos, listos para celebrar con quienes más queremos.\", \"title\": \"El sí\"}], \"title\": \"Nuestra historia\"}', '2026-01-25 10:30:37', '2026-01-25 10:30:37'),
('2e5bdf1e-fa0b-11f0-800c-040e3ca73ff2', 'f2b3c4d5-e6f7-4890-a1b2-c3d4e5f67890', 'countdown', 'countdown', 3, 1, '{\"title\": \"Cuenta regresiva\", \"subtitle\": \"Falta muy poco para el gran día\"}', '2026-01-25 10:30:37', '2026-01-25 10:30:37'),
('6c4e6f74-fa0d-11f0-800c-040e3ca73ff2', '11111111-2222-4333-8444-555555555555', 'couple_info', 'hero', 1, 1, '{\"headline\": \"¡Nos casamos!\", \"cta_label\": \"Confirmar asistencia\", \"cta_target\": \"#rsvp\", \"subheadline\": \"Acompáñanos a celebrar este día.\", \"hero_image_url\": null}', '2026-01-25 10:46:40', '2026-01-25 10:46:40'),
('6c52bb0e-fa0d-11f0-800c-040e3ca73ff2', '11111111-2222-4333-8444-555555555555', 'timeline', 'historia', 2, 1, '{\"items\": [{\"date\": \"2018\", \"text\": \"Un encuentro casual que cambió todo.\", \"title\": \"Nos conocimos\"}, {\"date\": \"2022\", \"text\": \"Una propuesta íntima, como siempre la soñamos.\", \"title\": \"El “sí”\"}, {\"date\": \"2026\", \"text\": \"El inicio de una nueva etapa.\", \"title\": \"La boda\"}], \"title\": \"Nuestra historia\"}', '2026-01-25 10:46:40', '2026-01-25 10:46:40'),
('6c562a47-fa0d-11f0-800c-040e3ca73ff2', '11111111-2222-4333-8444-555555555555', 'countdown', 'countdown', 3, 1, '{\"title\": \"Cuenta regresiva\", \"subtitle\": \"Falta muy poco para el gran día\"}', '2026-01-25 10:46:40', '2026-01-25 10:46:40'),
('ef31fd2e-fa14-11f0-800c-040e3ca73ff2', '8e99abc9-fa14-11f0-800c-040e3ca73ff2', 'couple_info', 'hero', 1, 1, '{\"headline\": \"¡Nos casamos!\", \"cta_label\": \"Confirmar asistencia\", \"cta_target\": \"#rsvp\", \"subheadline\": \"Acompáñanos a celebrar este día.\", \"hero_image_url\": \"/templates/sukun/img/hero.jpg\"}', '2026-01-25 11:40:26', '2026-01-25 11:40:26');

--
-- Triggers `content_modules`
--
DELIMITER $$
CREATE TRIGGER `bi_content_modules_uuid` BEFORE INSERT ON `content_modules` FOR EACH ROW BEGIN
  IF NEW.id IS NULL OR NEW.id = '' THEN SET NEW.id = UUID(); END IF;
END
$$
DELIMITER ;

-- --------------------------------------------------------

--
-- Table structure for table `email_log`
--

CREATE TABLE `email_log` (
  `id` bigint NOT NULL,
  `event_id` char(36) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `to_email` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL,
  `subject` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL,
  `provider` varchar(80) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `status` enum('sent','failed') COLLATE utf8mb4_unicode_ci NOT NULL,
  `provider_message_id` varchar(255) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `error` text COLLATE utf8mb4_unicode_ci,
  `created_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;

-- --------------------------------------------------------

--
-- Table structure for table `email_queue`
--

CREATE TABLE `email_queue` (
  `id` bigint NOT NULL,
  `event_id` char(36) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `to_email` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL,
  `subject` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL,
  `body_html` mediumtext COLLATE utf8mb4_unicode_ci,
  `body_text` mediumtext COLLATE utf8mb4_unicode_ci,
  `payload` json DEFAULT NULL,
  `status` enum('queued','sending','sent','failed') COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'queued',
  `attempts` int NOT NULL DEFAULT '0',
  `scheduled_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `last_error` text COLLATE utf8mb4_unicode_ci,
  `created_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;

-- --------------------------------------------------------

--
-- Table structure for table `events`
--

CREATE TABLE `events` (
  `id` char(36) COLLATE utf8mb4_unicode_ci NOT NULL,
  `client_id` char(36) COLLATE utf8mb4_unicode_ci NOT NULL,
  `slug` varchar(100) COLLATE utf8mb4_unicode_ci NOT NULL,
  `couple_title` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL,
  `primary_contact_email` varchar(255) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `time_zone` varchar(50) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'America/Mexico_City',
  `event_date_start` datetime NOT NULL,
  `event_date_end` datetime DEFAULT NULL,
  `rsvp_deadline` datetime DEFAULT NULL,
  `site_mode` enum('auto','pre','live','post') COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'auto',
  `visibility` enum('public','private') COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'public',
  `access_mode` enum('open','invite_code') COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'open',
  `venue_name` varchar(255) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `venue_address` text COLLATE utf8mb4_unicode_ci,
  `venue_geo_lat` decimal(10,8) DEFAULT NULL,
  `venue_geo_lng` decimal(11,8) DEFAULT NULL,
  `venue_config` json DEFAULT NULL,
  `theme_config` json DEFAULT NULL,
  `is_demo` tinyint(1) NOT NULL DEFAULT '0',
  `service_status` enum('draft','active','suspended','archived') COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'draft',
  `is_paid` tinyint(1) NOT NULL DEFAULT '0',
  `paid_until` datetime DEFAULT NULL,
  `created_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `updated_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;

--
-- Dumping data for table `events`
--

INSERT INTO `events` (`id`, `client_id`, `slug`, `couple_title`, `primary_contact_email`, `time_zone`, `event_date_start`, `event_date_end`, `rsvp_deadline`, `site_mode`, `visibility`, `access_mode`, `venue_name`, `venue_address`, `venue_geo_lat`, `venue_geo_lng`, `venue_config`, `theme_config`, `is_demo`, `service_status`, `is_paid`, `paid_until`, `created_at`, `updated_at`) VALUES
('11111111-2222-4333-8444-555555555555', 'd1234567-89ab-cdef-0123-456789abcdef', 'boda-solene-demo', 'Ana & Pablo', 'demo@13bodas.com', 'America/Mexico_City', '2026-10-25 20:00:00', '2026-10-26 02:00:00', '2026-10-01 23:59:59', 'auto', 'private', 'open', 'Jardín de los Sueños', 'Santa Catarina, Nuevo León, MX', '25.67430000', '-100.46000000', '{\"notes\": \"Recepción posterior a la ceremonia.\", \"dress_code\": \"Formal\"}', '{\"bg_color\": \"#F7F4EF\", \"font_body\": \"Inter\", \"text_color\": \"#2B2B2B\", \"font_heading\": \"Playfair Display\", \"primary_color\": \"#B08C7A\", \"muted_text_color\": \"#6B6B6B\"}', 1, 'active', 0, NULL, '2026-01-25 10:46:40', '2026-01-25 10:46:40'),
('4ad1e770-fa17-11f0-800c-040e3ca73ff2', 'd1234567-89ab-cdef-0123-456789abcdef', 'boda-sukun-demo', 'Isabella & William', 'demo@13bodas.com', 'America/Mexico_City', '2026-12-12 17:00:00', '2026-12-12 23:59:00', '2026-12-01 23:59:00', 'auto', 'private', 'open', 'Hacienda Santa Lucía', 'Santa Catarina, Nuevo León, MX', '25.67430000', '-100.46000000', '{\"notes\": \"Recepción posterior a la ceremonia.\", \"dress_code\": \"Formal\"}', '{\"bg\": \"#FBF8F4\", \"text\": \"#2B2B2B\", \"muted\": \"#6E6A6A\", \"primary\": \"#8B6F8E\", \"font_body\": \"Inter\", \"font_head\": \"Cormorant Garamond\", \"secondary\": \"#D7C6D9\"}', 1, 'active', 0, NULL, '2026-01-25 11:57:19', '2026-02-04 18:49:45'),
('8e99abc9-fa14-11f0-800c-040e3ca73ff2', 'd1234567-89ab-cdef-0123-456789abcdef', 'demo-sukun', 'Isabella & William', 'demo@13bodas.com', 'America/Mexico_City', '2026-12-12 17:00:00', '2026-12-13 02:00:00', '2026-12-01 23:59:59', 'live', 'private', 'open', 'Hacienda Santa Lucía', 'Carretera Nacional Km 250, Santiago, Nuevo León', '25.42840000', '-100.15160000', '{\"notes\": \"Ceremonia y recepción el mismo día.\", \"dress_code\": \"Formal\"}', '{\"bg_color\": \"#FBF8F4\", \"font_body\": \"Inter\", \"text_color\": \"#2B2B2B\", \"font_heading\": \"Cormorant Garamond\", \"primary_color\": \"#8B6F8E\", \"secondary_color\": \"#D7C6D9\"}', 1, 'active', 0, NULL, '2026-01-25 11:37:44', '2026-01-25 11:37:44'),
('e1234567-89ab-cdef-0123-456789abcdef', 'd1234567-89ab-cdef-0123-456789abcdef', 'ana-y-carlos', 'Ana & Carlos', 'ana.garcia@email.com', 'America/Mexico_City', '2025-12-24 07:00:00', '2025-12-25 02:00:00', '2025-06-30 12:00:00', 'live', 'private', 'open', 'Hacienda San José', 'Carretera Nacional Km 245, Santiago, Nuevo León', '25.42840000', '-100.15160000', NULL, NULL, 0, 'active', 0, NULL, '2026-01-25 07:40:59', '2026-02-04 18:52:20'),
('f2b3c4d5-e6f7-4890-a1b2-c3d4e5f67890', 'd1234567-89ab-cdef-0123-456789abcdef', 'demo-solene', 'Isabella & William', 'contacto@13bodas.com', 'America/Mexico_City', '2026-11-15 17:00:00', NULL, '2026-11-01 23:59:59', 'live', 'private', 'open', 'Hacienda Santa Lucía', 'Carretera Nacional Km 250, Santiago, Nuevo León', '25.42840000', '-100.15160000', NULL, '{\"bg_color\": \"#F7F4EF\", \"font_body\": \"Inter\", \"text_color\": \"#232323\", \"font_heading\": \"Playfair Display\", \"primary_color\": \"#B08D57\", \"muted_text_color\": \"#6B6B6B\"}', 1, 'active', 0, NULL, '2026-01-25 10:30:37', '2026-01-25 10:30:37'),
('uuid-evento-lovelove', 'd1234567-89ab-cdef-0123-456789abcdef', 'boda-ana-y-pablo', 'Ana & Pablo', NULL, 'America/Mexico_City', '2025-10-25 18:00:00', NULL, NULL, 'live', 'public', 'open', 'Jardín de los Sueños', NULL, NULL, NULL, NULL, '{\"primary_color\": \"#D32F2F\"}', 0, 'active', 0, NULL, '2026-01-25 09:48:19', '2026-01-25 09:48:19');

--
-- Triggers `events`
--
DELIMITER $$
CREATE TRIGGER `bi_events_uuid` BEFORE INSERT ON `events` FOR EACH ROW BEGIN
  IF NEW.id IS NULL OR NEW.id = '' THEN SET NEW.id = UUID(); END IF;
END
$$
DELIMITER ;

-- --------------------------------------------------------

--
-- Table structure for table `event_custom_domains`
--

CREATE TABLE `event_custom_domains` (
  `id` char(36) COLLATE utf8mb4_unicode_ci NOT NULL,
  `event_id` char(36) COLLATE utf8mb4_unicode_ci NOT NULL,
  `domain` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL,
  `status` enum('pending_dns','active','disabled') COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'pending_dns',
  `created_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;

--
-- Triggers `event_custom_domains`
--
DELIMITER $$
CREATE TRIGGER `bi_event_custom_domains_uuid` BEFORE INSERT ON `event_custom_domains` FOR EACH ROW BEGIN
  IF NEW.id IS NULL OR NEW.id = '' THEN SET NEW.id = UUID(); END IF;
END
$$
DELIMITER ;

-- --------------------------------------------------------

--
-- Table structure for table `event_faq_items`
--

CREATE TABLE `event_faq_items` (
  `id` char(36) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `event_id` char(36) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `question` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `answer` text CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `sort_order` int NOT NULL DEFAULT '0',
  `is_visible` tinyint(1) NOT NULL DEFAULT '1',
  `created_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;

--
-- Triggers `event_faq_items`
--
DELIMITER $$
CREATE TRIGGER `bi_event_faq_items_uuid` BEFORE INSERT ON `event_faq_items` FOR EACH ROW BEGIN
  IF NEW.id IS NULL OR NEW.id = '' THEN SET NEW.id = UUID(); END IF;
END
$$
DELIMITER ;

-- --------------------------------------------------------

--
-- Table structure for table `event_form_submissions`
--

CREATE TABLE `event_form_submissions` (
  `event_id` char(36) COLLATE utf8mb4_unicode_ci NOT NULL,
  `template_id` int DEFAULT NULL,
  `payload` json NOT NULL,
  `last_saved_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;

-- --------------------------------------------------------

--
-- Table structure for table `event_locations`
--

CREATE TABLE `event_locations` (
  `id` char(36) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `event_id` char(36) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `code` varchar(50) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `name` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `address` text CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci,
  `geo_lat` decimal(10,8) DEFAULT NULL,
  `geo_lng` decimal(11,8) DEFAULT NULL,
  `maps_url` varchar(600) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `waze_url` varchar(600) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `notes` text CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci,
  `sort_order` int NOT NULL DEFAULT '0',
  `created_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `updated_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;

--
-- Triggers `event_locations`
--
DELIMITER $$
CREATE TRIGGER `bi_event_locations_uuid` BEFORE INSERT ON `event_locations` FOR EACH ROW BEGIN
  IF NEW.id IS NULL OR NEW.id = '' THEN SET NEW.id = UUID(); END IF;
END
$$
DELIMITER ;

-- --------------------------------------------------------

--
-- Table structure for table `event_recommendations`
--

CREATE TABLE `event_recommendations` (
  `id` char(36) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `event_id` char(36) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `type` enum('hotel','transport','restaurant','other') CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'other',
  `title` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `description` text CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci,
  `url` varchar(600) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `image_url` varchar(600) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `sort_order` int NOT NULL DEFAULT '0',
  `is_visible` tinyint(1) NOT NULL DEFAULT '1',
  `created_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;

--
-- Triggers `event_recommendations`
--
DELIMITER $$
CREATE TRIGGER `bi_event_recommendations_uuid` BEFORE INSERT ON `event_recommendations` FOR EACH ROW BEGIN
  IF NEW.id IS NULL OR NEW.id = '' THEN SET NEW.id = UUID(); END IF;
END
$$
DELIMITER ;

-- --------------------------------------------------------

--
-- Table structure for table `event_schedule_items`
--

CREATE TABLE `event_schedule_items` (
  `id` char(36) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `event_id` char(36) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `location_id` char(36) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `title` varchar(120) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `description` text CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci,
  `starts_at` datetime DEFAULT NULL,
  `ends_at` datetime DEFAULT NULL,
  `icon` varchar(60) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `sort_order` int NOT NULL DEFAULT '0',
  `is_visible` tinyint(1) NOT NULL DEFAULT '1',
  `created_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `updated_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;

--
-- Triggers `event_schedule_items`
--
DELIMITER $$
CREATE TRIGGER `bi_event_schedule_items_uuid` BEFORE INSERT ON `event_schedule_items` FOR EACH ROW BEGIN
  IF NEW.id IS NULL OR NEW.id = '' THEN SET NEW.id = UUID(); END IF;
END
$$
DELIMITER ;

-- --------------------------------------------------------

--
-- Table structure for table `event_templates`
--

CREATE TABLE `event_templates` (
  `event_id` char(36) COLLATE utf8mb4_unicode_ci NOT NULL,
  `template_id` int NOT NULL,
  `is_active` tinyint(1) NOT NULL DEFAULT '1',
  `applied_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;

--
-- Dumping data for table `event_templates`
--

INSERT INTO `event_templates` (`event_id`, `template_id`, `is_active`, `applied_at`) VALUES
('11111111-2222-4333-8444-555555555555', 2, 1, '2026-01-25 10:46:40'),
('4ad1e770-fa17-11f0-800c-040e3ca73ff2', 3, 0, '2026-01-25 12:10:39'),
('4ad1e770-fa17-11f0-800c-040e3ca73ff2', 9, 1, '2026-02-04 18:49:45'),
('8e99abc9-fa14-11f0-800c-040e3ca73ff2', 3, 1, '2026-01-25 11:37:44'),
('e1234567-89ab-cdef-0123-456789abcdef', 1, 0, '2026-01-26 04:22:36'),
('e1234567-89ab-cdef-0123-456789abcdef', 8, 0, '2026-01-26 05:31:41'),
('e1234567-89ab-cdef-0123-456789abcdef', 9, 1, '2026-02-04 18:52:20'),
('f2b3c4d5-e6f7-4890-a1b2-c3d4e5f67890', 2, 1, '2026-01-25 10:30:37'),
('uuid-evento-lovelove', 1, 1, '2026-01-25 09:48:43');

-- --------------------------------------------------------

--
-- Table structure for table `guests`
--

CREATE TABLE `guests` (
  `id` char(36) COLLATE utf8mb4_unicode_ci NOT NULL,
  `group_id` char(36) COLLATE utf8mb4_unicode_ci NOT NULL,
  `first_name` varchar(100) COLLATE utf8mb4_unicode_ci NOT NULL,
  `last_name` varchar(100) COLLATE utf8mb4_unicode_ci NOT NULL,
  `email` varchar(255) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `phone_number` varchar(30) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `is_child` tinyint(1) NOT NULL DEFAULT '0',
  `is_primary_contact` tinyint(1) NOT NULL DEFAULT '0',
  `rsvp_status` enum('pending','accepted','declined') COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'pending',
  `created_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `updated_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;

--
-- Dumping data for table `guests`
--

INSERT INTO `guests` (`id`, `group_id`, `first_name`, `last_name`, `email`, `phone_number`, `is_child`, `is_primary_contact`, `rsvp_status`, `created_at`, `updated_at`) VALUES
('0c06a8e3-1b58-49de-9bd3-776bb94f9563', '744ee210-029c-4474-ae78-413ed08d234c', 'Jesse', 'Gomez', '', '', 1, 0, 'pending', '2026-01-25 22:33:13', '2026-01-25 22:33:13'),
('aee215ea-fb76-4e68-aa38-5307c21f4271', '744ee210-029c-4474-ae78-413ed08d234c', 'Isaac', 'Gomez', '', '', 0, 0, 'pending', '2026-01-25 22:34:07', '2026-01-25 22:34:07'),
('bd318ed3-8b27-49f9-a418-e958ba9b0d55', '744ee210-029c-4474-ae78-413ed08d234c', 'Alondra Carolin', 'Gomez', 'alondra@gmail.com', '', 0, 1, 'pending', '2026-01-25 22:32:43', '2026-01-25 22:32:50'),
('c8af8b68-4e29-4814-80d2-7ceda3462ca5', '744ee210-029c-4474-ae78-413ed08d234c', 'Laura ', 'Gomez', 'laura@gmail.com', '8115247741', 0, 1, 'pending', '2026-01-25 22:31:57', '2026-01-25 22:31:57'),
('h1111111-1111-1111-1111-111111111111', 'g1111111-1111-1111-1111-111111111111', 'Juan', 'Pérez', 'juan.perez@email.com', '8111111111', 0, 1, 'accepted', '2026-01-25 07:42:52', '2026-01-25 07:42:52'),
('h1111111-1111-1111-1111-111111111112', 'g1111111-1111-1111-1111-111111111111', 'María', 'Pérez', NULL, NULL, 0, 0, 'accepted', '2026-01-25 07:42:52', '2026-01-25 07:42:52'),
('h1111111-1111-1111-1111-111111111113', 'g1111111-1111-1111-1111-111111111111', 'Juanito', 'Pérez', NULL, NULL, 1, 0, 'accepted', '2026-01-25 07:42:52', '2026-01-25 07:42:52'),
('h2222222-2222-2222-2222-222222222221', 'g2222222-2222-2222-2222-222222222222', 'Roberto', 'López', 'roberto@email.com', '8122222222', 0, 1, 'accepted', '2026-01-25 07:42:52', '2026-01-25 23:45:14'),
('h2222222-2222-2222-2222-222222222222', 'g2222222-2222-2222-2222-222222222222', 'Laura', 'López', NULL, NULL, 0, 0, 'accepted', '2026-01-25 07:42:52', '2026-01-25 23:45:18'),
('h3333333-3333-3333-3333-333333333331', 'g3333333-3333-3333-3333-333333333333', 'Pedro', 'Martínez', 'pedro@uni.edu', '8133333333', 0, 1, 'accepted', '2026-01-25 07:42:52', '2026-01-26 04:24:54'),
('h3333333-3333-3333-3333-333333333332', 'g3333333-3333-3333-3333-333333333333', 'Sandra', 'Ramírez', 'sandra@uni.edu', '8144444444', 0, 0, 'accepted', '2026-01-25 07:42:52', '2026-01-25 07:42:52'),
('h3333333-3333-3333-3333-333333333333', 'g3333333-3333-3333-3333-333333333333', 'Miguel', 'Torres', 'miguel@uni.edu', '8155555555', 0, 0, 'accepted', '2026-01-25 07:42:52', '2026-01-25 23:45:09');

--
-- Triggers `guests`
--
DELIMITER $$
CREATE TRIGGER `bi_guests_uuid` BEFORE INSERT ON `guests` FOR EACH ROW BEGIN
  IF NEW.id IS NULL OR NEW.id = '' THEN SET NEW.id = UUID(); END IF;
END
$$
DELIMITER ;

-- --------------------------------------------------------

--
-- Table structure for table `guest_groups`
--

CREATE TABLE `guest_groups` (
  `id` char(36) COLLATE utf8mb4_unicode_ci NOT NULL,
  `event_id` char(36) COLLATE utf8mb4_unicode_ci NOT NULL,
  `group_name` varchar(255) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `access_code` varchar(20) COLLATE utf8mb4_unicode_ci NOT NULL,
  `max_additional_guests` int NOT NULL DEFAULT '0',
  `is_vip` tinyint(1) NOT NULL DEFAULT '0',
  `current_status` enum('invited','viewed','partial','responded') COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'invited',
  `invited_at` datetime DEFAULT NULL,
  `first_viewed_at` datetime DEFAULT NULL,
  `last_viewed_at` datetime DEFAULT NULL,
  `responded_at` datetime DEFAULT NULL,
  `created_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;

--
-- Dumping data for table `guest_groups`
--

INSERT INTO `guest_groups` (`id`, `event_id`, `group_name`, `access_code`, `max_additional_guests`, `is_vip`, `current_status`, `invited_at`, `first_viewed_at`, `last_viewed_at`, `responded_at`, `created_at`) VALUES
('744ee210-029c-4474-ae78-413ed08d234c', '4ad1e770-fa17-11f0-800c-040e3ca73ff2', 'Famila Gomez Manzanares', 'AQN2LQEX', 1, 0, 'invited', NULL, NULL, NULL, NULL, '2026-01-25 16:31:57'),
('g1111111-1111-1111-1111-111111111111', 'e1234567-89ab-cdef-0123-456789abcdef', 'Familia Pérez', 'PEREZ001', 0, 0, 'invited', NULL, NULL, NULL, NULL, '2026-01-25 07:41:53'),
('g2222222-2222-2222-2222-222222222222', 'e1234567-89ab-cdef-0123-456789abcdef', 'Familia López', 'LOPEZ001', 2, 0, 'invited', NULL, NULL, NULL, NULL, '2026-01-25 07:41:53'),
('g3333333-3333-3333-3333-333333333333', 'e1234567-89ab-cdef-0123-456789abcdef', 'Amigos Universidad', 'AMIGO001', 0, 0, 'invited', NULL, NULL, NULL, NULL, '2026-01-25 07:41:53');

--
-- Triggers `guest_groups`
--
DELIMITER $$
CREATE TRIGGER `bi_guest_groups_uuid` BEFORE INSERT ON `guest_groups` FOR EACH ROW BEGIN
  IF NEW.id IS NULL OR NEW.id = '' THEN SET NEW.id = UUID(); END IF;
END
$$
DELIMITER ;

-- --------------------------------------------------------

--
-- Table structure for table `leads`
--

CREATE TABLE `leads` (
  `id` char(36) COLLATE utf8mb4_unicode_ci NOT NULL,
  `full_name` varchar(120) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `email` varchar(255) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `phone` varchar(30) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `event_date` date DEFAULT NULL,
  `message` text COLLATE utf8mb4_unicode_ci,
  `source` varchar(80) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `status` enum('new','contacted','qualified','won','lost') COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'new',
  `utm_payload` json DEFAULT NULL,
  `created_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `updated_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;

--
-- Triggers `leads`
--
DELIMITER $$
CREATE TRIGGER `bi_leads_uuid` BEFORE INSERT ON `leads` FOR EACH ROW BEGIN
  IF NEW.id IS NULL OR NEW.id = '' THEN SET NEW.id = UUID(); END IF;
END
$$
DELIMITER ;

-- --------------------------------------------------------

--
-- Table structure for table `media_assets`
--

CREATE TABLE `media_assets` (
  `id` char(36) COLLATE utf8mb4_unicode_ci NOT NULL,
  `event_id` char(36) COLLATE utf8mb4_unicode_ci NOT NULL,
  `file_url_original` varchar(600) COLLATE utf8mb4_unicode_ci NOT NULL,
  `file_url_thumbnail` varchar(600) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `file_url_large` varchar(600) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `mime_type` varchar(120) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `alt_text` varchar(255) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `caption` text COLLATE utf8mb4_unicode_ci,
  `aspect_ratio` decimal(8,4) DEFAULT NULL,
  `category_tag` varchar(80) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `category` varchar(80) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `sort_order` int NOT NULL DEFAULT '0',
  `is_private` tinyint(1) NOT NULL DEFAULT '0',
  `created_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;

--
-- Dumping data for table `media_assets`
--

INSERT INTO `media_assets` (`id`, `event_id`, `file_url_original`, `file_url_thumbnail`, `file_url_large`, `mime_type`, `alt_text`, `caption`, `aspect_ratio`, `category_tag`, `category`, `sort_order`, `is_private`, `created_at`) VALUES
('602fc2d8-3bb8-46ff-a8f6-fabceb4d1558', 'e1234567-89ab-cdef-0123-456789abcdef', 'uploads/events/e1234567-89ab-cdef-0123-456789abcdef/gallery/1769401533_759360d0f75b6cef1723.png', NULL, NULL, NULL, 'Gemini_Generated_Image_jdfph3jdfph3jdfp', NULL, NULL, NULL, 'gallery', 999, 0, '2026-01-26 04:25:33'),
('8c20c9c7-8e54-4af0-a37a-06d44d7a4c58', 'e1234567-89ab-cdef-0123-456789abcdef', 'uploads/events/e1234567-89ab-cdef-0123-456789abcdef/gallery/1769384634_9d4200b7b3e0065b6071.jpg', NULL, NULL, NULL, 'auth-one-bg', NULL, NULL, NULL, 'gallery', 999, 0, '2026-01-25 23:43:54'),
('bb71203c-8c6b-4b56-90e9-e9a1cd1821a7', 'e1234567-89ab-cdef-0123-456789abcdef', 'uploads/events/e1234567-89ab-cdef-0123-456789abcdef/gallery/1769401533_6f071744199ecfdf1f5f.jpg', NULL, NULL, NULL, '593095709_2460120144385309_5338011157378795765_n', NULL, NULL, NULL, 'gallery', 999, 0, '2026-01-26 04:25:33'),
('dfc01ea9-961e-4922-86b3-47283adef04a', 'e1234567-89ab-cdef-0123-456789abcdef', 'uploads/events/e1234567-89ab-cdef-0123-456789abcdef/gallery/1769401533_1fec19bf309bc9a73fe9.jpeg', NULL, NULL, NULL, 'WhatsApp Image 2025-11-13 at 17.16.56 (1)', NULL, NULL, NULL, 'gallery', 999, 0, '2026-01-26 04:25:33'),
('ed05cb49-e18e-40d8-bc62-a1063f5b1f20', 'e1234567-89ab-cdef-0123-456789abcdef', 'uploads/events/e1234567-89ab-cdef-0123-456789abcdef/gallery/1769401533_bc67e19aa87a1afbe52a.webp', NULL, NULL, NULL, 'f1280x720-6800_138475_5050', NULL, NULL, NULL, 'gallery', 999, 0, '2026-01-26 04:25:33');

--
-- Triggers `media_assets`
--
DELIMITER $$
CREATE TRIGGER `bi_media_assets_uuid` BEFORE INSERT ON `media_assets` FOR EACH ROW BEGIN
  IF NEW.id IS NULL OR NEW.id = '' THEN SET NEW.id = UUID(); END IF;
END
$$
DELIMITER ;

-- --------------------------------------------------------

--
-- Table structure for table `menu_options`
--

CREATE TABLE `menu_options` (
  `id` char(36) COLLATE utf8mb4_unicode_ci NOT NULL,
  `event_id` char(36) COLLATE utf8mb4_unicode_ci NOT NULL,
  `name` varchar(120) COLLATE utf8mb4_unicode_ci NOT NULL,
  `description` varchar(255) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `is_vegan` tinyint(1) NOT NULL DEFAULT '0',
  `is_gluten_free` tinyint(1) NOT NULL DEFAULT '0',
  `is_kid_friendly` tinyint(1) NOT NULL DEFAULT '0',
  `sort_order` int NOT NULL DEFAULT '0',
  `created_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;

--
-- Triggers `menu_options`
--
DELIMITER $$
CREATE TRIGGER `bi_menu_options_uuid` BEFORE INSERT ON `menu_options` FOR EACH ROW BEGIN
  IF NEW.id IS NULL OR NEW.id = '' THEN SET NEW.id = UUID(); END IF;
END
$$
DELIMITER ;

-- --------------------------------------------------------

--
-- Table structure for table `migrations`
--

CREATE TABLE `migrations` (
  `id` bigint UNSIGNED NOT NULL,
  `version` varchar(255) COLLATE utf8mb4_general_ci NOT NULL,
  `class` varchar(255) COLLATE utf8mb4_general_ci NOT NULL,
  `group` varchar(255) COLLATE utf8mb4_general_ci NOT NULL,
  `namespace` varchar(255) COLLATE utf8mb4_general_ci NOT NULL,
  `time` int NOT NULL,
  `batch` int UNSIGNED NOT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci;

--
-- Dumping data for table `migrations`
--

INSERT INTO `migrations` (`id`, `version`, `class`, `group`, `namespace`, `time`, `batch`) VALUES
(1, '2026-01-24-235434', 'App\\Database\\Migrations\\CreateUsers', 'default', 'App', 1769299179, 1),
(2, '2026-01-24-235443', 'App\\Database\\Migrations\\CreateRoles', 'default', 'App', 1769299179, 1),
(3, '2026-01-24-235449', 'App\\Database\\Migrations\\CreatePermissions', 'default', 'App', 1769299179, 1),
(4, '2026-01-24-235456', 'App\\Database\\Migrations\\CreateUserRoles', 'default', 'App', 1769299179, 1),
(5, '2026-01-24-235503', 'App\\Database\\Migrations\\CreateRolePermissions', 'default', 'App', 1769299179, 1),
(6, '2026-01-24-235509', 'App\\Database\\Migrations\\CreateClients', 'default', 'App', 1769299179, 1),
(7, '2026-01-24-235541', 'App\\Database\\Migrations\\CreatePlans', 'default', 'App', 1769299179, 1),
(8, '2026-01-24-235549', 'App\\Database\\Migrations\\CreateSubscriptions', 'default', 'App', 1769299179, 1),
(9, '2026-01-24-235556', 'App\\Database\\Migrations\\CreateTemplates', 'default', 'App', 1769299179, 1),
(10, '2026-01-24-235601', 'App\\Database\\Migrations\\CreateEvents', 'default', 'App', 1769299179, 1),
(11, '2026-01-24-235607', 'App\\Database\\Migrations\\CreateEventTemplates', 'default', 'App', 1769299179, 1);

-- --------------------------------------------------------

--
-- Table structure for table `permissions`
--

CREATE TABLE `permissions` (
  `id` int NOT NULL,
  `name` varchar(120) COLLATE utf8mb4_unicode_ci NOT NULL,
  `description` varchar(255) COLLATE utf8mb4_unicode_ci DEFAULT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;

--
-- Dumping data for table `permissions`
--

INSERT INTO `permissions` (`id`, `name`, `description`) VALUES
(1, 'events.create', 'Crear eventos'),
(2, 'events.update', 'Editar eventos'),
(3, 'events.delete', 'Eliminar eventos'),
(4, 'templates.manage', 'Gestionar plantillas'),
(5, 'guests.manage', 'Gestionar invitados'),
(6, 'rsvp.view', 'Ver RSVPs'),
(7, 'billing.manage', 'Gestionar estado del servicio'),
(8, 'leads.manage', 'Gestionar leads'),
(9, 'users.manage', 'Gestionar usuarios');

-- --------------------------------------------------------

--
-- Table structure for table `plans`
--

CREATE TABLE `plans` (
  `id` int NOT NULL,
  `code` varchar(50) COLLATE utf8mb4_unicode_ci NOT NULL,
  `name` varchar(80) COLLATE utf8mb4_unicode_ci NOT NULL,
  `description` varchar(255) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `is_active` tinyint(1) NOT NULL DEFAULT '1'
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;

--
-- Dumping data for table `plans`
--

INSERT INTO `plans` (`id`, `code`, `name`, `description`, `is_active`) VALUES
(1, 'essential', 'Essential', 'Invitación web básica + RSVP', 1),
(2, 'interactive', 'Interactive', 'Incluye módulos avanzados, galería, extras', 1),
(3, 'infinity', 'Infinity', 'Todo incluido + soporte extendido', 1);

-- --------------------------------------------------------

--
-- Table structure for table `registry_items`
--

CREATE TABLE `registry_items` (
  `id` char(36) COLLATE utf8mb4_unicode_ci NOT NULL,
  `event_id` char(36) COLLATE utf8mb4_unicode_ci NOT NULL,
  `title` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL,
  `name` varchar(255) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `description` text COLLATE utf8mb4_unicode_ci,
  `category` varchar(100) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `image_url` varchar(600) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `product_url` varchar(600) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `external_url` varchar(600) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `price` decimal(10,2) DEFAULT NULL,
  `currency_code` char(3) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'MXN',
  `is_fund` tinyint(1) NOT NULL DEFAULT '0',
  `fund_goal` decimal(10,2) DEFAULT NULL,
  `quantity_requested` int DEFAULT '1',
  `quantity_fulfilled` int DEFAULT '0',
  `goal_amount` decimal(10,2) DEFAULT NULL,
  `current_amount` decimal(10,2) DEFAULT '0.00',
  `amount_collected` decimal(10,2) NOT NULL DEFAULT '0.00',
  `is_claimed` tinyint(1) NOT NULL DEFAULT '0',
  `is_priority` tinyint(1) DEFAULT '0',
  `is_visible` tinyint(1) DEFAULT '1',
  `sort_order` int DEFAULT '0',
  `claimed_by` varchar(255) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `claimed_at` datetime DEFAULT NULL,
  `created_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;

--
-- Dumping data for table `registry_items`
--

INSERT INTO `registry_items` (`id`, `event_id`, `title`, `name`, `description`, `category`, `image_url`, `product_url`, `external_url`, `price`, `currency_code`, `is_fund`, `fund_goal`, `quantity_requested`, `quantity_fulfilled`, `goal_amount`, `current_amount`, `amount_collected`, `is_claimed`, `is_priority`, `is_visible`, `sort_order`, `claimed_by`, `claimed_at`, `created_at`) VALUES
('fd0778fb-0501-4f77-a646-4cbd7cce52a0', 'e1234567-89ab-cdef-0123-456789abcdef', '', 'Sarten', 'sarten de 20', NULL, '', NULL, 'http://localhost/13bodas/public/admin/events/e1234567-89ab-cdef-0123-456789abcdef/registry', '1200.00', 'MXN', 0, '0.00', 1, 0, NULL, '0.00', '0.00', 1, 0, 1, 999, NULL, '2026-01-25 23:44:41', '2026-01-25 23:44:30');

--
-- Triggers `registry_items`
--
DELIMITER $$
CREATE TRIGGER `bi_registry_items_uuid` BEFORE INSERT ON `registry_items` FOR EACH ROW BEGIN
  IF NEW.id IS NULL OR NEW.id = '' THEN SET NEW.id = UUID(); END IF;
END
$$
DELIMITER ;

-- --------------------------------------------------------

--
-- Table structure for table `roles`
--

CREATE TABLE `roles` (
  `id` int NOT NULL,
  `name` varchar(50) COLLATE utf8mb4_unicode_ci NOT NULL,
  `description` varchar(255) COLLATE utf8mb4_unicode_ci DEFAULT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;

--
-- Dumping data for table `roles`
--

INSERT INTO `roles` (`id`, `name`, `description`) VALUES
(1, 'superadmin', 'Acceso total a la plataforma'),
(2, 'admin', 'Admin del sistema/operaciones'),
(3, 'staff', 'Soporte/operador'),
(4, 'client', 'Cliente final');

-- --------------------------------------------------------

--
-- Table structure for table `role_permissions`
--

CREATE TABLE `role_permissions` (
  `role_id` int NOT NULL,
  `permission_id` int NOT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;

--
-- Dumping data for table `role_permissions`
--

INSERT INTO `role_permissions` (`role_id`, `permission_id`) VALUES
(1, 1),
(2, 1),
(4, 1),
(1, 2),
(2, 2),
(3, 2),
(4, 2),
(1, 3),
(2, 3),
(1, 4),
(2, 4),
(1, 5),
(2, 5),
(3, 5),
(4, 5),
(1, 6),
(2, 6),
(3, 6),
(4, 6),
(1, 7),
(2, 7),
(1, 8),
(2, 8),
(3, 8),
(1, 9),
(2, 9);

-- --------------------------------------------------------

--
-- Table structure for table `rsvp_answers`
--

CREATE TABLE `rsvp_answers` (
  `id` char(36) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `rsvp_response_id` char(36) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `question_id` char(36) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `value_text` text CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci,
  `value_json` json DEFAULT NULL,
  `created_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;

--
-- Triggers `rsvp_answers`
--
DELIMITER $$
CREATE TRIGGER `bi_rsvp_answers_uuid` BEFORE INSERT ON `rsvp_answers` FOR EACH ROW BEGIN
  IF NEW.id IS NULL OR NEW.id = '' THEN SET NEW.id = UUID(); END IF;
END
$$
DELIMITER ;

-- --------------------------------------------------------

--
-- Table structure for table `rsvp_questions`
--

CREATE TABLE `rsvp_questions` (
  `id` char(36) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `event_id` char(36) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `code` varchar(80) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `label` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `type` enum('text','textarea','select','checkbox','radio','number') CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `options_json` json DEFAULT NULL,
  `is_required` tinyint(1) NOT NULL DEFAULT '0',
  `sort_order` int NOT NULL DEFAULT '0',
  `is_active` tinyint(1) NOT NULL DEFAULT '1',
  `created_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;

--
-- Triggers `rsvp_questions`
--
DELIMITER $$
CREATE TRIGGER `bi_rsvp_questions_uuid` BEFORE INSERT ON `rsvp_questions` FOR EACH ROW BEGIN
  IF NEW.id IS NULL OR NEW.id = '' THEN SET NEW.id = UUID(); END IF;
END
$$
DELIMITER ;

-- --------------------------------------------------------

--
-- Table structure for table `rsvp_responses`
--

CREATE TABLE `rsvp_responses` (
  `id` char(36) COLLATE utf8mb4_unicode_ci NOT NULL,
  `guest_id` char(36) COLLATE utf8mb4_unicode_ci NOT NULL,
  `attending_status` enum('pending','accepted','declined') COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'pending',
  `meal_option_id` char(36) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `dietary_restrictions` text COLLATE utf8mb4_unicode_ci,
  `transportation_requested` tinyint(1) NOT NULL DEFAULT '0',
  `song_request` varchar(255) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `message_to_couple` text COLLATE utf8mb4_unicode_ci,
  `responded_at` datetime DEFAULT NULL,
  `response_method` varchar(50) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `created_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;

--
-- Triggers `rsvp_responses`
--
DELIMITER $$
CREATE TRIGGER `bi_rsvp_responses_uuid` BEFORE INSERT ON `rsvp_responses` FOR EACH ROW BEGIN
  IF NEW.id IS NULL OR NEW.id = '' THEN SET NEW.id = UUID(); END IF;
END
$$
DELIMITER ;

-- --------------------------------------------------------

--
-- Table structure for table `subscriptions`
--

CREATE TABLE `subscriptions` (
  `id` char(36) COLLATE utf8mb4_unicode_ci NOT NULL,
  `client_id` char(36) COLLATE utf8mb4_unicode_ci NOT NULL,
  `plan_id` int NOT NULL,
  `status` enum('trial','active','paused','expired','cancelled') COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'trial',
  `starts_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `ends_at` datetime DEFAULT NULL,
  `paid_through` datetime DEFAULT NULL,
  `external_ref` varchar(120) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `notes` text COLLATE utf8mb4_unicode_ci,
  `created_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `updated_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;

--
-- Triggers `subscriptions`
--
DELIMITER $$
CREATE TRIGGER `bi_subscriptions_uuid` BEFORE INSERT ON `subscriptions` FOR EACH ROW BEGIN
  IF NEW.id IS NULL OR NEW.id = '' THEN SET NEW.id = UUID(); END IF;
END
$$
DELIMITER ;

-- --------------------------------------------------------

--
-- Table structure for table `templates`
--

CREATE TABLE `templates` (
  `id` int NOT NULL,
  `code` varchar(80) COLLATE utf8mb4_unicode_ci NOT NULL,
  `name` varchar(120) COLLATE utf8mb4_unicode_ci NOT NULL,
  `description` text COLLATE utf8mb4_unicode_ci,
  `preview_url` varchar(500) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `thumbnail_url` varchar(500) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `is_public` tinyint(1) NOT NULL DEFAULT '1',
  `is_active` tinyint(1) NOT NULL DEFAULT '1',
  `sort_order` int NOT NULL DEFAULT '0',
  `schema_json` json DEFAULT NULL,
  `meta_json` json DEFAULT NULL,
  `created_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `updated_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;

--
-- Dumping data for table `templates`
--

INSERT INTO `templates` (`id`, `code`, `name`, `description`, `preview_url`, `thumbnail_url`, `is_public`, `is_active`, `sort_order`, `schema_json`, `meta_json`, `created_at`, `updated_at`) VALUES
(1, 'lovelove', 'LoveLove Design', 'Diseño romántico basado en imagen de referencia', NULL, NULL, 1, 1, 0, '{\"fonts\": [\"Playfair Display\", \"Lato\"], \"colors\": [\"#E57373\", \"#FCE4EC\"]}', NULL, '2026-01-25 09:47:57', '2026-01-25 09:47:57'),
(2, 'solene', 'Solene', 'Solemne, minimalista y elegante. Serif en títulos, mucho whitespace, ornamentos discretos.', NULL, NULL, 1, 1, 0, '{\"editable\": [{\"key\": \"primary_color\", \"type\": \"color\", \"label\": \"Color principal\", \"default\": \"#B08D57\"}, {\"key\": \"bg_color\", \"type\": \"color\", \"label\": \"Color fondo\", \"default\": \"#F7F4EF\"}, {\"key\": \"text_color\", \"type\": \"color\", \"label\": \"Color texto\", \"default\": \"#232323\"}, {\"key\": \"muted_text_color\", \"type\": \"color\", \"label\": \"Texto secundario\", \"default\": \"#6B6B6B\"}, {\"key\": \"font_heading\", \"type\": \"font\", \"label\": \"Fuente títulos\", \"default\": \"Playfair Display\"}, {\"key\": \"font_body\", \"type\": \"font\", \"label\": \"Fuente texto\", \"default\": \"Inter\"}]}', NULL, '2026-01-25 10:30:37', '2026-01-25 10:30:37'),
(3, 'sukun', 'Sukun', 'Template floral elegante (inspirado en sukun-next). Hero, historia, galería, programa, lugar y RSVP.', '/templates/sukun/img/preview.jpg', '/templates/sukun/img/thumbnail.jpg', 1, 1, 0, '{\"theme\": {\"bg\": {\"type\": \"color\", \"label\": \"Fondo\", \"default\": \"#FBF8F4\"}, \"text\": {\"type\": \"color\", \"label\": \"Texto\", \"default\": \"#2B2B2B\"}, \"muted\": {\"type\": \"color\", \"label\": \"Muted\", \"default\": \"#6E6A6A\"}, \"primary\": {\"type\": \"color\", \"label\": \"Primario\", \"default\": \"#8B6F8E\"}, \"font_body\": {\"type\": \"font\", \"label\": \"Fuente texto\", \"default\": \"Inter\"}, \"font_head\": {\"type\": \"font\", \"label\": \"Fuente títulos\", \"default\": \"Cormorant Garamond\"}, \"secondary\": {\"type\": \"color\", \"label\": \"Secundario\", \"default\": \"#D7C6D9\"}}}', NULL, '2026-01-25 11:37:33', '2026-01-25 12:10:39'),
(8, 'weddingo', 'Weddingo', 'Template moderno 2025: hero full, countdown, detalle de evento, galería masonry, regalos y RSVP. Animaciones suaves y 100% responsive.', NULL, NULL, 1, 1, 50, '{\"theme\": {\"bg\": {\"type\": \"color\", \"label\": \"Background\", \"default\": \"#FFFFFF\"}, \"text\": {\"type\": \"color\", \"label\": \"Text\", \"default\": \"#1E1B1F\"}, \"muted\": {\"type\": \"color\", \"label\": \"Muted\", \"default\": \"#6B6670\"}, \"primary\": {\"type\": \"color\", \"label\": \"Primary\", \"default\": \"#C08CA3\"}, \"surface\": {\"type\": \"color\", \"label\": \"Surface\", \"default\": \"#F6F3F6\"}, \"font_body\": {\"type\": \"font\", \"label\": \"Body font\", \"default\": \"Inter\"}, \"font_head\": {\"type\": \"font\", \"label\": \"Heading font\", \"default\": \"Playfair Display\"}, \"secondary\": {\"type\": \"color\", \"label\": \"Secondary\", \"default\": \"#2C2A2E\"}}, \"layout\": \"single-page\", \"version\": \"1.0.0\", \"sections\": [{\"id\": \"hero\", \"label\": \"Hero\", \"enabled\": true}, {\"id\": \"countdown\", \"label\": \"Countdown\", \"enabled\": true}, {\"id\": \"couple\", \"label\": \"Pareja\", \"enabled\": true}, {\"id\": \"story\", \"label\": \"Historia\", \"enabled\": true}, {\"id\": \"event\", \"label\": \"Evento\", \"enabled\": true}, {\"id\": \"gallery\", \"label\": \"Galería\", \"enabled\": true}, {\"id\": \"party\", \"label\": \"Wedding Party\", \"enabled\": false}, {\"id\": \"gifts\", \"label\": \"Regalos\", \"enabled\": true}, {\"id\": \"rsvp\", \"label\": \"RSVP\", \"enabled\": true}], \"supports\": {\"gifts\": true, \"gallery\": true, \"rsvp_open\": true, \"invite_code\": true}, \"data_contract\": {\"rsvp\": {\"fields\": [\"attending_status\", \"meal_option_id\", \"dietary_restrictions\", \"song_request\", \"message_to_couple\", \"responded_at\"], \"tables\": [\"guest_groups\", \"guests\", \"rsvp_responses\"]}, \"gifts\": {\"table\": \"registry_items\", \"fields\": [\"title\", \"description\", \"price\", \"currency_code\", \"image_url\", \"product_url\", \"external_url\", \"is_fund\", \"fund_goal\", \"goal_amount\", \"current_amount\", \"is_visible\", \"sort_order\"]}, \"gallery\": {\"fields\": [\"url\", \"filename\", \"mime_type\", \"alt_text\", \"caption\", \"sort_order\"], \"source\": \"uploads/events/{event_id}/gallery/*\"}, \"event_fields\": [\"id\", \"slug\", \"time_zone\", \"couple_title\", \"primary_contact_email\", \"event_date_start\", \"event_date_end\", \"rsvp_deadline\", \"venue_name\", \"venue_address\", \"venue_geo_lat\", \"venue_geo_lng\", \"visibility\", \"access_mode\", \"site_mode\"], \"media_assets\": {\"table\": \"media_assets\", \"fields\": [\"file_url_original\", \"file_url_thumbnail\", \"file_url_large\", \"category_tag\", \"sort_order\"], \"preferred\": true}}}', '{\"notes\": \"Weddingo base schema actualizado para 13bodas\", \"updated_by\": \"migration\"}', '2026-01-25 23:31:23', '2026-01-25 23:54:08'),
(9, 'majestic', 'Majestic - Full Feature', 'Template premium con todas las caracter├¡sticas: hero fullscreen, countdown animado, historia de pareja, itinerario interactivo, mapa Leaflet, galer├¡a con lightbox, registro de regalos, cortejo nupcial, formulario RSVP y FAQ. Dise├▒o elegante, mobile-first con animaciones AOS. Ideal para bodas de lujo que requieren mostrar toda la informaci├│n del evento.', 'https://via.placeholder.com/1200x800/8B7355/ffffff?text=Majestic+Preview', 'https://via.placeholder.com/400x300/8B7355/ffffff?text=Majestic', 1, 1, 1, '{\"fonts\": {\"body\": \"Montserrat\", \"accent\": \"Great Vibes\", \"heading\": \"Cormorant Garamond\"}, \"colors\": {\"accent\": \"#C9A97E\", \"primary\": \"#8B7355\", \"secondary\": \"#D4AF37\", \"text_dark\": \"#2C2C2C\", \"background\": \"#FAF9F6\", \"text_light\": \"#FFFFFF\", \"background_secondary\": \"#F5F3EE\"}, \"settings\": {\"map_zoom\": 15, \"enable_aos\": true, \"enable_countdown\": true, \"animation_duration\": \"800\", \"enable_gallery_lightbox\": true}}', '{\"features\": {\"rsvp_form\": true, \"responsive\": true, \"image_gallery\": true, \"wedding_party\": true, \"aos_animations\": true, \"timeline_story\": true, \"countdown_timer\": true, \"interactive_map\": true}, \"sections\": [\"hero\", \"countdown\", \"story\", \"schedule\", \"location\", \"gallery\", \"registry\", \"party\", \"rsvp\", \"faq\"], \"libraries\": {\"aos\": \"2.3.1\", \"leaflet\": \"1.9.4\", \"bootstrap_icons\": \"1.11.3\"}}', '2026-02-04 12:48:50', '2026-02-04 12:48:50');

-- --------------------------------------------------------

--
-- Table structure for table `users`
--

CREATE TABLE `users` (
  `id` char(36) COLLATE utf8mb4_unicode_ci NOT NULL,
  `email` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL,
  `password_hash` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL,
  `full_name` varchar(120) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `phone` varchar(30) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `is_active` tinyint(1) NOT NULL DEFAULT '1',
  `email_verified_at` datetime DEFAULT NULL,
  `last_login_at` datetime DEFAULT NULL,
  `created_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `updated_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;

--
-- Dumping data for table `users`
--

INSERT INTO `users` (`id`, `email`, `password_hash`, `full_name`, `phone`, `is_active`, `email_verified_at`, `last_login_at`, `created_at`, `updated_at`) VALUES
('7b121cfe-2fce-4c91-904e-6f1c1e8c634d', 'ana.garcia@example.com', '$2y$10$aEEtRLObgC59WBfIOdx6LegTTdYlevP815uc/Tg.GgwGKt25yqRHG', 'Ana García López', '', 1, NULL, NULL, '2026-01-25 18:34:07', '2026-01-25 22:04:08'),
('a1b2c3d4-e5f6-7890-abcd-ef1234567890', 'admin@13bodas.com', '$2a$12$ck0DyLqqf.D94fRL8q3vwO1RfpTsH6wTEql7M0qK8IrVhv.u47vF6', 'Cesar Gomez', '8115247741', 1, NULL, '2026-02-05 18:47:58', '2026-01-25 00:24:41', '2026-02-05 18:47:58'),
('c1234567-89ab-cdef-0123-456789abcdef', 'ana.garcia@email.com', '$2a$12$ck0DyLqqf.D94fRL8q3vwO1RfpTsH6wTEql7M0qK8IrVhv.u47vF6', 'Ana García López', '8112345678', 1, NULL, NULL, '2026-01-25 07:39:27', '2026-01-25 07:39:27');

--
-- Triggers `users`
--
DELIMITER $$
CREATE TRIGGER `bi_users_uuid` BEFORE INSERT ON `users` FOR EACH ROW BEGIN
  IF NEW.id IS NULL OR NEW.id = '' THEN SET NEW.id = UUID(); END IF;
END
$$
DELIMITER ;

-- --------------------------------------------------------

--
-- Table structure for table `user_roles`
--

CREATE TABLE `user_roles` (
  `user_id` char(36) COLLATE utf8mb4_unicode_ci NOT NULL,
  `role_id` int NOT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;

--
-- Dumping data for table `user_roles`
--

INSERT INTO `user_roles` (`user_id`, `role_id`) VALUES
('a1b2c3d4-e5f6-7890-abcd-ef1234567890', 1),
('7b121cfe-2fce-4c91-904e-6f1c1e8c634d', 4),
('c1234567-89ab-cdef-0123-456789abcdef', 4);

-- --------------------------------------------------------

--
-- Table structure for table `wedding_party_members`
--

CREATE TABLE `wedding_party_members` (
  `id` char(36) COLLATE utf8mb4_unicode_ci NOT NULL,
  `event_id` char(36) COLLATE utf8mb4_unicode_ci NOT NULL,
  `full_name` varchar(120) COLLATE utf8mb4_unicode_ci NOT NULL,
  `role` varchar(80) COLLATE utf8mb4_unicode_ci NOT NULL,
  `category` enum('bride_side','groom_side','officiant','other') COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'other',
  `bio` text COLLATE utf8mb4_unicode_ci,
  `image_url` varchar(600) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `social_links` json DEFAULT NULL,
  `display_order` int NOT NULL DEFAULT '0',
  `created_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;

--
-- Triggers `wedding_party_members`
--
DELIMITER $$
CREATE TRIGGER `bi_wedding_party_members_uuid` BEFORE INSERT ON `wedding_party_members` FOR EACH ROW BEGIN
  IF NEW.id IS NULL OR NEW.id = '' THEN SET NEW.id = UUID(); END IF;
END
$$
DELIMITER ;

--
-- Indexes for dumped tables
--

--
-- Indexes for table `audit_log`
--
ALTER TABLE `audit_log`
  ADD PRIMARY KEY (`id`),
  ADD KEY `idx_audit_event` (`event_id`,`created_at`),
  ADD KEY `idx_audit_actor` (`actor_user_id`,`created_at`);

--
-- Indexes for table `auth_tokens`
--
ALTER TABLE `auth_tokens`
  ADD PRIMARY KEY (`id`),
  ADD UNIQUE KEY `uq_token_hash` (`token_hash`),
  ADD KEY `idx_tokens_user` (`user_id`);

--
-- Indexes for table `ci_sessions`
--
ALTER TABLE `ci_sessions`
  ADD PRIMARY KEY (`id`),
  ADD KEY `ci_sessions_timestamp` (`timestamp`);

--
-- Indexes for table `clients`
--
ALTER TABLE `clients`
  ADD PRIMARY KEY (`id`),
  ADD UNIQUE KEY `user_id` (`user_id`);

--
-- Indexes for table `content_modules`
--
ALTER TABLE `content_modules`
  ADD PRIMARY KEY (`id`),
  ADD KEY `idx_modules_event_order` (`event_id`,`sort_order`);

--
-- Indexes for table `email_log`
--
ALTER TABLE `email_log`
  ADD PRIMARY KEY (`id`),
  ADD KEY `idx_email_log_event` (`event_id`);

--
-- Indexes for table `email_queue`
--
ALTER TABLE `email_queue`
  ADD PRIMARY KEY (`id`),
  ADD KEY `idx_email_queue_status_sched` (`status`,`scheduled_at`),
  ADD KEY `fk_email_queue_event` (`event_id`);

--
-- Indexes for table `events`
--
ALTER TABLE `events`
  ADD PRIMARY KEY (`id`),
  ADD UNIQUE KEY `slug` (`slug`),
  ADD KEY `idx_events_client` (`client_id`),
  ADD KEY `idx_events_status` (`service_status`,`is_paid`);

--
-- Indexes for table `event_custom_domains`
--
ALTER TABLE `event_custom_domains`
  ADD PRIMARY KEY (`id`),
  ADD UNIQUE KEY `domain` (`domain`),
  ADD KEY `fk_domains_event` (`event_id`);

--
-- Indexes for table `event_faq_items`
--
ALTER TABLE `event_faq_items`
  ADD PRIMARY KEY (`id`),
  ADD KEY `idx_faq_event` (`event_id`,`sort_order`);

--
-- Indexes for table `event_form_submissions`
--
ALTER TABLE `event_form_submissions`
  ADD PRIMARY KEY (`event_id`),
  ADD KEY `fk_form_template` (`template_id`);

--
-- Indexes for table `event_locations`
--
ALTER TABLE `event_locations`
  ADD PRIMARY KEY (`id`),
  ADD UNIQUE KEY `uq_locations_event_code` (`event_id`,`code`),
  ADD KEY `idx_locations_event` (`event_id`,`sort_order`);

--
-- Indexes for table `event_recommendations`
--
ALTER TABLE `event_recommendations`
  ADD PRIMARY KEY (`id`),
  ADD KEY `idx_reco_event` (`event_id`,`sort_order`);

--
-- Indexes for table `event_schedule_items`
--
ALTER TABLE `event_schedule_items`
  ADD PRIMARY KEY (`id`),
  ADD KEY `idx_schedule_event` (`event_id`,`sort_order`),
  ADD KEY `idx_schedule_location` (`location_id`);

--
-- Indexes for table `event_templates`
--
ALTER TABLE `event_templates`
  ADD PRIMARY KEY (`event_id`,`template_id`),
  ADD KEY `idx_event_templates_active` (`event_id`,`is_active`),
  ADD KEY `fk_event_templates_template` (`template_id`);

--
-- Indexes for table `guests`
--
ALTER TABLE `guests`
  ADD PRIMARY KEY (`id`),
  ADD KEY `idx_guests_group` (`group_id`),
  ADD KEY `idx_guests_email` (`email`);

--
-- Indexes for table `guest_groups`
--
ALTER TABLE `guest_groups`
  ADD PRIMARY KEY (`id`),
  ADD UNIQUE KEY `uq_group_event_code` (`event_id`,`access_code`),
  ADD KEY `idx_groups_event_status` (`event_id`,`current_status`);

--
-- Indexes for table `leads`
--
ALTER TABLE `leads`
  ADD PRIMARY KEY (`id`),
  ADD KEY `idx_leads_status_created` (`status`,`created_at`),
  ADD KEY `idx_leads_email` (`email`);

--
-- Indexes for table `media_assets`
--
ALTER TABLE `media_assets`
  ADD PRIMARY KEY (`id`),
  ADD KEY `idx_assets_event` (`event_id`),
  ADD KEY `idx_assets_event_tag` (`event_id`,`category_tag`);

--
-- Indexes for table `menu_options`
--
ALTER TABLE `menu_options`
  ADD PRIMARY KEY (`id`),
  ADD KEY `idx_menu_event` (`event_id`);

--
-- Indexes for table `migrations`
--
ALTER TABLE `migrations`
  ADD PRIMARY KEY (`id`);

--
-- Indexes for table `permissions`
--
ALTER TABLE `permissions`
  ADD PRIMARY KEY (`id`),
  ADD UNIQUE KEY `name` (`name`);

--
-- Indexes for table `plans`
--
ALTER TABLE `plans`
  ADD PRIMARY KEY (`id`),
  ADD UNIQUE KEY `code` (`code`);

--
-- Indexes for table `registry_items`
--
ALTER TABLE `registry_items`
  ADD PRIMARY KEY (`id`),
  ADD KEY `idx_registry_event` (`event_id`);

--
-- Indexes for table `roles`
--
ALTER TABLE `roles`
  ADD PRIMARY KEY (`id`),
  ADD UNIQUE KEY `name` (`name`);

--
-- Indexes for table `role_permissions`
--
ALTER TABLE `role_permissions`
  ADD PRIMARY KEY (`role_id`,`permission_id`),
  ADD KEY `fk_role_permissions_perm` (`permission_id`);

--
-- Indexes for table `rsvp_answers`
--
ALTER TABLE `rsvp_answers`
  ADD PRIMARY KEY (`id`),
  ADD KEY `idx_ans_rsvp` (`rsvp_response_id`),
  ADD KEY `idx_ans_question` (`question_id`);

--
-- Indexes for table `rsvp_questions`
--
ALTER TABLE `rsvp_questions`
  ADD PRIMARY KEY (`id`),
  ADD UNIQUE KEY `uq_rsvp_q_event_code` (`event_id`,`code`),
  ADD KEY `idx_rsvp_q_event` (`event_id`,`sort_order`);

--
-- Indexes for table `rsvp_responses`
--
ALTER TABLE `rsvp_responses`
  ADD PRIMARY KEY (`id`),
  ADD KEY `idx_rsvp_guest_created` (`guest_id`,`created_at`),
  ADD KEY `fk_rsvp_meal` (`meal_option_id`);

--
-- Indexes for table `subscriptions`
--
ALTER TABLE `subscriptions`
  ADD PRIMARY KEY (`id`),
  ADD KEY `idx_subs_client_status` (`client_id`,`status`),
  ADD KEY `fk_subs_plan` (`plan_id`);

--
-- Indexes for table `templates`
--
ALTER TABLE `templates`
  ADD PRIMARY KEY (`id`),
  ADD UNIQUE KEY `code` (`code`),
  ADD KEY `idx_templates_public` (`is_public`);

--
-- Indexes for table `users`
--
ALTER TABLE `users`
  ADD PRIMARY KEY (`id`),
  ADD UNIQUE KEY `email` (`email`),
  ADD KEY `idx_users_active` (`is_active`),
  ADD KEY `idx_users_created` (`created_at`);

--
-- Indexes for table `user_roles`
--
ALTER TABLE `user_roles`
  ADD PRIMARY KEY (`user_id`,`role_id`),
  ADD KEY `fk_user_roles_role` (`role_id`);

--
-- Indexes for table `wedding_party_members`
--
ALTER TABLE `wedding_party_members`
  ADD PRIMARY KEY (`id`),
  ADD KEY `idx_party_event_order` (`event_id`,`display_order`);

--
-- AUTO_INCREMENT for dumped tables
--

--
-- AUTO_INCREMENT for table `audit_log`
--
ALTER TABLE `audit_log`
  MODIFY `id` bigint NOT NULL AUTO_INCREMENT;

--
-- AUTO_INCREMENT for table `auth_tokens`
--
ALTER TABLE `auth_tokens`
  MODIFY `id` bigint NOT NULL AUTO_INCREMENT;

--
-- AUTO_INCREMENT for table `email_log`
--
ALTER TABLE `email_log`
  MODIFY `id` bigint NOT NULL AUTO_INCREMENT;

--
-- AUTO_INCREMENT for table `email_queue`
--
ALTER TABLE `email_queue`
  MODIFY `id` bigint NOT NULL AUTO_INCREMENT;

--
-- AUTO_INCREMENT for table `migrations`
--
ALTER TABLE `migrations`
  MODIFY `id` bigint UNSIGNED NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=12;

--
-- AUTO_INCREMENT for table `permissions`
--
ALTER TABLE `permissions`
  MODIFY `id` int NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=10;

--
-- AUTO_INCREMENT for table `plans`
--
ALTER TABLE `plans`
  MODIFY `id` int NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=4;

--
-- AUTO_INCREMENT for table `roles`
--
ALTER TABLE `roles`
  MODIFY `id` int NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=5;

--
-- AUTO_INCREMENT for table `templates`
--
ALTER TABLE `templates`
  MODIFY `id` int NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=10;

--
-- Constraints for dumped tables
--

--
-- Constraints for table `audit_log`
--
ALTER TABLE `audit_log`
  ADD CONSTRAINT `fk_audit_event` FOREIGN KEY (`event_id`) REFERENCES `events` (`id`) ON DELETE SET NULL,
  ADD CONSTRAINT `fk_audit_user` FOREIGN KEY (`actor_user_id`) REFERENCES `users` (`id`) ON DELETE SET NULL;

--
-- Constraints for table `auth_tokens`
--
ALTER TABLE `auth_tokens`
  ADD CONSTRAINT `fk_tokens_user` FOREIGN KEY (`user_id`) REFERENCES `users` (`id`) ON DELETE CASCADE;

--
-- Constraints for table `clients`
--
ALTER TABLE `clients`
  ADD CONSTRAINT `fk_clients_user` FOREIGN KEY (`user_id`) REFERENCES `users` (`id`) ON DELETE CASCADE;

--
-- Constraints for table `content_modules`
--
ALTER TABLE `content_modules`
  ADD CONSTRAINT `fk_modules_event` FOREIGN KEY (`event_id`) REFERENCES `events` (`id`) ON DELETE CASCADE;

--
-- Constraints for table `email_log`
--
ALTER TABLE `email_log`
  ADD CONSTRAINT `fk_email_log_event` FOREIGN KEY (`event_id`) REFERENCES `events` (`id`) ON DELETE SET NULL;

--
-- Constraints for table `email_queue`
--
ALTER TABLE `email_queue`
  ADD CONSTRAINT `fk_email_queue_event` FOREIGN KEY (`event_id`) REFERENCES `events` (`id`) ON DELETE SET NULL;

--
-- Constraints for table `events`
--
ALTER TABLE `events`
  ADD CONSTRAINT `fk_events_client` FOREIGN KEY (`client_id`) REFERENCES `clients` (`id`) ON DELETE CASCADE;

--
-- Constraints for table `event_custom_domains`
--
ALTER TABLE `event_custom_domains`
  ADD CONSTRAINT `fk_domains_event` FOREIGN KEY (`event_id`) REFERENCES `events` (`id`) ON DELETE CASCADE;

--
-- Constraints for table `event_faq_items`
--
ALTER TABLE `event_faq_items`
  ADD CONSTRAINT `fk_faq_event` FOREIGN KEY (`event_id`) REFERENCES `events` (`id`) ON DELETE CASCADE;

--
-- Constraints for table `event_form_submissions`
--
ALTER TABLE `event_form_submissions`
  ADD CONSTRAINT `fk_form_event` FOREIGN KEY (`event_id`) REFERENCES `events` (`id`) ON DELETE CASCADE,
  ADD CONSTRAINT `fk_form_template` FOREIGN KEY (`template_id`) REFERENCES `templates` (`id`);

--
-- Constraints for table `event_locations`
--
ALTER TABLE `event_locations`
  ADD CONSTRAINT `fk_locations_event` FOREIGN KEY (`event_id`) REFERENCES `events` (`id`) ON DELETE CASCADE;

--
-- Constraints for table `event_recommendations`
--
ALTER TABLE `event_recommendations`
  ADD CONSTRAINT `fk_reco_event` FOREIGN KEY (`event_id`) REFERENCES `events` (`id`) ON DELETE CASCADE;

--
-- Constraints for table `event_schedule_items`
--
ALTER TABLE `event_schedule_items`
  ADD CONSTRAINT `fk_schedule_event` FOREIGN KEY (`event_id`) REFERENCES `events` (`id`) ON DELETE CASCADE,
  ADD CONSTRAINT `fk_schedule_location` FOREIGN KEY (`location_id`) REFERENCES `event_locations` (`id`) ON DELETE SET NULL;

--
-- Constraints for table `event_templates`
--
ALTER TABLE `event_templates`
  ADD CONSTRAINT `fk_event_templates_event` FOREIGN KEY (`event_id`) REFERENCES `events` (`id`) ON DELETE CASCADE,
  ADD CONSTRAINT `fk_event_templates_template` FOREIGN KEY (`template_id`) REFERENCES `templates` (`id`);

--
-- Constraints for table `guests`
--
ALTER TABLE `guests`
  ADD CONSTRAINT `fk_guests_group` FOREIGN KEY (`group_id`) REFERENCES `guest_groups` (`id`) ON DELETE CASCADE;

--
-- Constraints for table `guest_groups`
--
ALTER TABLE `guest_groups`
  ADD CONSTRAINT `fk_groups_event` FOREIGN KEY (`event_id`) REFERENCES `events` (`id`) ON DELETE CASCADE;

--
-- Constraints for table `media_assets`
--
ALTER TABLE `media_assets`
  ADD CONSTRAINT `fk_assets_event` FOREIGN KEY (`event_id`) REFERENCES `events` (`id`) ON DELETE CASCADE;

--
-- Constraints for table `menu_options`
--
ALTER TABLE `menu_options`
  ADD CONSTRAINT `fk_menu_event` FOREIGN KEY (`event_id`) REFERENCES `events` (`id`) ON DELETE CASCADE;

--
-- Constraints for table `registry_items`
--
ALTER TABLE `registry_items`
  ADD CONSTRAINT `fk_registry_event` FOREIGN KEY (`event_id`) REFERENCES `events` (`id`) ON DELETE CASCADE;

--
-- Constraints for table `role_permissions`
--
ALTER TABLE `role_permissions`
  ADD CONSTRAINT `fk_role_permissions_perm` FOREIGN KEY (`permission_id`) REFERENCES `permissions` (`id`) ON DELETE CASCADE,
  ADD CONSTRAINT `fk_role_permissions_role` FOREIGN KEY (`role_id`) REFERENCES `roles` (`id`) ON DELETE CASCADE;

--
-- Constraints for table `rsvp_answers`
--
ALTER TABLE `rsvp_answers`
  ADD CONSTRAINT `fk_ans_question` FOREIGN KEY (`question_id`) REFERENCES `rsvp_questions` (`id`) ON DELETE CASCADE,
  ADD CONSTRAINT `fk_ans_rsvp` FOREIGN KEY (`rsvp_response_id`) REFERENCES `rsvp_responses` (`id`) ON DELETE CASCADE;

--
-- Constraints for table `rsvp_questions`
--
ALTER TABLE `rsvp_questions`
  ADD CONSTRAINT `fk_rsvp_q_event` FOREIGN KEY (`event_id`) REFERENCES `events` (`id`) ON DELETE CASCADE;

--
-- Constraints for table `rsvp_responses`
--
ALTER TABLE `rsvp_responses`
  ADD CONSTRAINT `fk_rsvp_guest` FOREIGN KEY (`guest_id`) REFERENCES `guests` (`id`) ON DELETE CASCADE,
  ADD CONSTRAINT `fk_rsvp_meal` FOREIGN KEY (`meal_option_id`) REFERENCES `menu_options` (`id`) ON DELETE SET NULL;

--
-- Constraints for table `subscriptions`
--
ALTER TABLE `subscriptions`
  ADD CONSTRAINT `fk_subs_client` FOREIGN KEY (`client_id`) REFERENCES `clients` (`id`) ON DELETE CASCADE,
  ADD CONSTRAINT `fk_subs_plan` FOREIGN KEY (`plan_id`) REFERENCES `plans` (`id`);

--
-- Constraints for table `user_roles`
--
ALTER TABLE `user_roles`
  ADD CONSTRAINT `fk_user_roles_role` FOREIGN KEY (`role_id`) REFERENCES `roles` (`id`) ON DELETE CASCADE,
  ADD CONSTRAINT `fk_user_roles_user` FOREIGN KEY (`user_id`) REFERENCES `users` (`id`) ON DELETE CASCADE;

--
-- Constraints for table `wedding_party_members`
--
ALTER TABLE `wedding_party_members`
  ADD CONSTRAINT `fk_party_event` FOREIGN KEY (`event_id`) REFERENCES `events` (`id`) ON DELETE CASCADE;
COMMIT;

/*!40101 SET CHARACTER_SET_CLIENT=@OLD_CHARACTER_SET_CLIENT */;
/*!40101 SET CHARACTER_SET_RESULTS=@OLD_CHARACTER_SET_RESULTS */;
/*!40101 SET COLLATION_CONNECTION=@OLD_COLLATION_CONNECTION */;
